(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["found2"],{"60b6":function(t,e,i){"use strict";var o=i("e1f6"),s=i.n(o);s.a},7124:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"found2-container"},[i("TheHeader",{staticClass:"transparent",attrs:{title:t.$t("found2.FindPwd"),"left-arrow":"",leftClick:t.goBack}}),i("div",{staticClass:"found2-form-box"},[i("van-notice-bar",{attrs:{wrapable:"",text:t.$t("found1.FindPwdTip")}}),i("div",{staticClass:"title"},[t._v(t._s(t.$t("found2.SelectVerificationMethod")))]),i("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:t.nextStep}},[i("div",{staticClass:"radio-container"},[i("van-radio-group",{model:{value:t.verificationMethod,callback:function(e){t.verificationMethod=e},expression:"verificationMethod"}},[t.found2&&t.found2.mobile&&t.found2.mobileIsVerified?i("van-radio",{attrs:{name:"1"}},[t._v(t._s(t.$t("found2.MobileValidation")))]):t._e(),t.found2&&t.found2.email&&t.found2.emailIsVerified?i("van-radio",{attrs:{name:"2"}},[t._v(t._s(t.$t("found2.EmailValidation")))]):t._e()],1)],1),i("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.UserAccount")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t.username))]},proxy:!0}])}),"1"===t.verificationMethod?i("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.MobileNumber")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t._f("hideMobile")(t.found2.mobile)))]},proxy:!0}],null,!1,2096646383)}):t._e(),"2"===t.verificationMethod?i("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.Emal")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t.found2.email))]},proxy:!0}],null,!1,4294007196)}):t._e(),i("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.EnterValidateCode")))]},proxy:!0}])}),i("van-cell-group",{staticClass:"code-input-wrap"},[i("van-field",{attrs:{maxlength:"10",placeholder:t.$t("found2.EnterValidateCode")},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),i("van-button",{staticClass:"field-btn",attrs:{disabled:!t.flag},on:{click:function(e){return e.preventDefault(),t.sendCode(e)}}},[t._v(t._s(t.buttonText))])],1),i("div",{staticClass:"van-cell"},[i("van-button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:t.buttonDisabled}},[t._v(t._s(t.$t("found2.Next")))])],1)],1)],1)],1)},s=[],n={name:"Found2",data(){return{verificationMethod:"",code:"",count:60,flag:!0,timer:"",buttonText:this.$t("found2.GetValidateCode"),buttonDisabled:!0}},computed:{username(){return this.$store.state.passport.username},found2(){return this.$store.state.passport.found2}},watch:{code:{handler(t){this.buttonDisabled=!t}}},beforeDestroy(){window.clearTimeout(this.timer),this.count=60,this.flag=!0},created(){this.found2?this.$api.register.phoneFormatVerify({},t=>{this.notAllowPhoneNumber=t.data.regTelNotAllow.split(",").join("|")}):this.$router.push("/found1")},methods:{getCode(){if(0===this.count)return this.count=60,this.flag=!0,this.buttonText=this.$t("found2.GetValidateCode"),void window.clearTimeout(this.timer);this.buttonText=`${this.count}s ${this.$t("found2.Resend")}`,this.count--,this.timer=setTimeout(()=>{this.getCode()},1e3)},sendPhoneCode(){this.$api.found.getBackPassword({body:{username:this.username,phoneNumber:this.found2.mobile}},()=>{this.flag=!1,this.getCode(),this.$cf.showSuccessMessageDialog(this.$t("found2.MobileSendSuccess"))})},sendMailCode(){this.$api.found.getBackPassword({body:{username:this.username,mail:this.found2.email}},()=>{this.flag=!1,this.getCode(),this.$cf.showSuccessMessageDialog(this.$t("found2.MailSendSuccess"))})},sendCode(){"1"===this.verificationMethod?this.sendPhoneCode():"2"===this.verificationMethod&&this.sendMailCode()},nextStep(){let t,e="";const i=this.verificationMethod;"1"===this.verificationMethod?t=this.found2.mobile:"2"===this.verificationMethod&&(t=this.found2.email),e=this.code,this.$api.found.authCode({body:{code:e,method:t,username:this.username,methodType:i}},()=>{this.$cf.showSuccessMessageDialog(this.$t("found2.VerifySuccess")),this.$router.push("/found3")})},goBack(){this.$router.push("/found1")}},filters:{hideMobile(t){const e=t.toString();return`${e.substr(0,2)}＊＊＊＊＊＊＊＊${e.substr(e.length-1,1)}`},hideEmail(t){const e=t.split("@"),i=e[0].split("");return`${i.map((t,e)=>0!==e&&e!==i.length-1?"＊":t).join("")}@${e[1]}`}}},a=n,d=(i("60b6"),i("2877")),r=Object(d["a"])(a,o,s,!1,null,null,null);e["default"]=r.exports},e1f6:function(t,e,i){}}]);