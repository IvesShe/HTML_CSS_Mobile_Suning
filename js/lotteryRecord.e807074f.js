(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["lotteryRecord"],{"6f6c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery-record-container"},[i("TheHeader",{attrs:{title:t.$t("flipsCard.LotteryRecord"),"left-arrow":"","left-click":t.goBack}}),i("van-tabs",{staticClass:"tapchang-title",attrs:{type:"line","line-height":3,"swipe-threshold":"6",sticky:"",animated:""},on:{click:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(e){return i("van-tab",{key:e.type,attrs:{title:e.name}},[i("LotteryRecordPage",{attrs:{pageItem:t.dataList[t.active],timeObj:t.timeObj,pagination:t.pagination,active:t.active},on:{getRecordLog:t.getRecordLog,loadMore:t.loadMore,openApplyPrize:t.openApplyPrize}})],1)})),1),t.showApplyPrize?i("ApplyPrize",{attrs:{prizeInfo:t.prizeInfo},on:{close:t.closeApplyPrize,submit:t.submitApplyPrize}}):t._e()],1)},s=[],r=i("9ccf"),o={data(){return{tabs:[{type:1,name:this.$t("wheelBox.FreeDraw"),spinType:"FREE"},{type:2,name:this.$t("wheelBox.DiamondDraw"),spinType:"DIAMOND"},{type:3,name:this.$t("flipsCard.FlipsCardTitle"),spinType:"FLIPCARD"}],title:this.$t("wheelBox.FreeDraw"),type:1,active:0,dataList:[[],[],[]],timeObj:{start:this.$dateFun.getDateByDay(-7),end:this.$dateFun.getDateByDay()},pageNum:1,pageSize:5,api:"queryLotteryRecordLog",spinType:"FREE",pagination:{show:!1,loading:!1},showApplyPrize:!1,prizeInfo:{}}},methods:{closeApplyPrize(){this.prizeInfo={},this.showApplyPrize=!1},openApplyPrize(t){this.prizeInfo=t,this.showApplyPrize=!0},getRecordLog(t){t&&(this.timeObj=t),this.init()},submitApplyPrize(t){this.$api.lotteryList.applyLuckySpinReward({body:t},t=>{this.$cf.showSuccessMessageDialog(t.message),this.showApplyPrize=!1,this.getRecordLog()})},goBack(){Object(r["goBack"])(this.$route)},init(t,e){this.pagination.loading=!0,this.$api.lotteryList.queryLotteryRecordLog({body:{spinType:this.spinType,startTime:this.$dateFun.formatDate(this.timeObj.start,"yyyy-MM-dd"),endTime:this.$dateFun.formatDate(this.timeObj.end,"yyyy-MM-dd")},pageBean:{page:t||1,pageSize:this.pageSize}},t=>{var i,a,s,r;null!==e&&void 0!==e&&e.isStack?this.dataList[this.active]=this.dataList[this.active].concat(null===(s=t.data)||void 0===s?void 0:s.data):this.dataList[this.active]=null===(r=t.data)||void 0===r?void 0:r.data;this.pagination.show=(null===(i=t.data)||void 0===i?void 0:i.hasNextPage)&&0!==(null===(a=t.data)||void 0===a?void 0:a.data.length),this.pagination.loading=!1,this.$forceUpdate()},()=>{this.pagination.loading=!1})},loadMore({currentPage:t}){this.init(t,{isStack:!0})},changeTab(){this.title=this.tabs[this.active].name,this.timeObj={start:this.timeObj.start,end:this.timeObj.end},this.$router.push({name:"lotteryRecord",query:{tabName:this.tabs[this.active].spinType}})},queryRecord(){this.init()},onChxeDate(t){this.type=t,this.$refs[this.type+"chxeDate"].showDate=!0},confirmDate(t){this.timeObj[this.type]=t}},filters:{getText(t,e){return`暂无${e[t].name}记录`}},components:{LotteryRecordPage:()=>i.e("chunk-37b882fc").then(i.bind(null,"64bd")),ApplyPrize:()=>i.e("chunk-3717fee4").then(i.bind(null,"a9a0"))},watch:{$route(){switch(this.$route.query.tabName){case"DIAMOND":this.active=1;break;case"FLIPCARD":this.active=2;break;default:this.active=0;break}this.spinType=this.$route.query.tabName,this.title=this.tabs[this.active].name,this.init()}},created(){if(this.$route.query.tabName){switch(this.$route.query.tabName){case"DIAMOND":this.active=1;break;case"FLIPCARD":this.active=2;break;default:this.active=0;break}this.spinType=this.tabs[this.active].spinType,this.title=this.tabs[this.active].name,this.init()}else this.$router.push({name:"lotteryRecord",query:{tabName:this.tabs[this.active].spinType,redirect:this.$route.query.redirect}})}},n=o,h=i("2877"),p=Object(h["a"])(n,a,s,!1,null,"5135f920",null);e["default"]=p.exports}}]);