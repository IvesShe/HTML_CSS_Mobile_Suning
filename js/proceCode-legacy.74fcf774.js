(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["proceCode"],{"37dd":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"proce-code-container"},[i("TheHeader",{staticClass:"transparent",attrs:{title:e.headerTitle,"left-arrow":""},on:{"click-left":function(t){return e.goBack()}}}),i("div",{staticClass:"form-box"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.formTitle))]),"wechat"===e.type?i("p",{staticClass:"tips"},[e._v(e._s(e.$t("proceCode.Tip3")))]):e._e(),i("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:e.sendCode}},["wechat"!==e.type?i("TransparentFieldInput",{attrs:{maxlength:e.formFields[0].maxlength,placeholder:e.formFields[0].placeholder,validatedState:e.formFields[0].validatedState,usePrefixIcon:e.formFields[0].usePrefixIcon,usePrefixText:e.formFields[0].usePrefixText,prefixIconClass:e.formFields[0].prefixIconClass,bind:e.formFields[0],inputClass:"mobile"===e.type?"nation-code-input":""},on:{blur:function(t){e.formFields[0].blur&&e.field.blur(e.formFields[0])}},scopedSlots:e._u(["mobile"===e.type?{key:"before-input",fn:function(){return[i("div",{staticClass:"nation-code-wrap"},[i("BaseSelector",{attrs:{columns:e.nationCodes,value:e.nationCode,presentKey:"label",valueKey:"value",containerClass:"nation-code-select-wrap"},on:{confirm:e.onNCSelect}})],1)]},proxy:!0}:null],null,!0),model:{value:e.formFields[0].value,callback:function(t){e.$set(e.formFields[0],"value",t)},expression:"formFields[0].value"}}):e._e()],1),i("van-form",{attrs:{"validate-trigger":"onChange"},on:{submit:e.onSubmit}},[i("TransparentFieldInput",{attrs:{maxlength:e.formFields[1].maxlength,placeholder:e.formFields[1].placeholder,validatedState:e.formFields[1].validatedState,usePrefixIcon:e.formFields[1].usePrefixIcon,prefixIconClass:e.formFields[1].prefixIconClass,bind:e.formFields[1]},on:{blur:function(t){e.formFields[1].blur&&e.field.blur(e.formFields[1])}},scopedSlots:e._u([{key:"right",fn:function(){return[i("button",{staticClass:"code-btn",attrs:{type:"button",round:"",disabled:!e.flag},on:{click:e.sendCode}},[e._v(e._s(e.buttonText))])]},proxy:!0}]),model:{value:e.formFields[1].value,callback:function(t){e.$set(e.formFields[1],"value",t)},expression:"formFields[1].value"}}),i("div",{staticClass:"van-cell"},[i("van-button",{staticClass:"submit-btn",attrs:{type:"submit"}},[e._v(e._s(e.$t("Confirm")))])],1)],1)],1)],1)},n=[],a=i("f2dc"),r=i("655c"),s=i("a79b"),l=i("8cae"),u={name:"ProceCode",mixins:[l["a"]],data:function(){return{formFields:[],headerTitle:"",formTitle:"",buttonText:this.$t("proceCode.SendVerificationCode"),type:"",count:60,flag:!0,timer:"",notAllowPhoneNumber:""}},computed:{phoneNumber:function(){return this.getPhoneNumWithNationCode({nationCode:this.nationCode,phone:this.formFields[0].value})}},methods:{onNCSelect:function(e){this.nationCode=e.value,this.formFields[0].value&&this.$refs.formRef.validate("mobile")},setData:function(){var e=this;this.type=this.$route.query.type,"email"===this.type?(this.headerTitle=this.$t("proceCode.EmailCertification"),this.formTitle=this.$t("proceCode.EmailCertification"),this.formFields=[{name:"email",value:"",maxlength:100,placeholder:this.$t("proceCode.ValidateMsgEmail"),usePrefixIcon:!0,prefixIconClass:"ic-mail",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgEmail")},{message:this.$t("proceCode.ValidateFormatMsgEmail"),validator:function(e){if(e)return a["a"].email(e).flag}}]},{name:"emailCode",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgAuth"),usePrefixIcon:!0,prefixIconClass:"ic-guard",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgAuth")}]}]):"mobile"===this.type?(this.$api.register.phoneFormatVerify({},(function(t){e.notAllowPhoneNumber=t.data.regTelNotAllow.split(",").join("|")})),this.headerTitle=this.$t("proceCode.CertifiedMobilePhone"),this.formTitle=this.$t("proceCode.CertifiedMobilePhone"),this.formFields=[{name:"mobile",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgPhone"),usePrefixIcon:!0,prefixIconClass:"ic-phone",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgPhone")},{message:this.$t("proceCode.PhoneValidationWarning"),validator:function(t){if(t){var i=a["a"].phoneNum(t,e.notAllowPhoneNumber,r["a"].th,e.nationCode);return i.flag}}}]},{name:"mobileCode",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgAuth"),usePrefixIcon:!0,prefixIconClass:"ic-guard",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgAuth")}]}]):"wechat"===this.type&&(this.headerTitle=this.$t("proceCode.CertifiedWechat"),this.formTitle=this.$t("proceCode.CertifiedWechat"),this.formFields=[{},{name:"wechat",value:"",maxlength:20,placeholder:this.$t("proceCode.ValidateMsgWechat"),usePrefixIcon:!0,prefixIconClass:"ic-wechat",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgWechat")}]}])},getCode:function(){var e=this;if(0===this.count)return this.count=60,this.flag=!0,"email"===this.type?this.buttonText=this.$t("proceCode.SendEmailVerification"):"mobile"===this.type&&(this.buttonText=this.$t("proceCode.SendPhoneCode")),void window.clearTimeout(this.timer);this.buttonText="".concat(this.count,"s ").concat(this.$t("proceCode.Resend")),this.count--,this.timer=setTimeout((function(){e.getCode()}),1e3)},sendMailCode:function(){var e=this;this.$api.my.getEmailCode({body:{recipient:this.formFields[0].value}},(function(){e.flag=!1,e.getCode(),e.$cf.showConfirmSuccessDialog({title:e.$t("proceCode.PopMsg")})}))},sendPhoneCode:function(){var e=this;this.formFields[0].value=this.formFields[0].value.length>9?this.formFields[0].value.slice(1):this.formFields[0].value,this.$api.register.getAuthCode({body:{recipient:this.phoneNumber}},(function(){e.flag=!1,e.getCode(),e.$cf.showConfirmSuccessDialog({title:e.$t("proceCode.PopMsg2")})}))},sendCode:function(){"email"===this.type?this.sendMailCode():"mobile"===this.type&&this.sendPhoneCode()},onSubmit:function(){var e=this;if("email"===this.type)this.$api.my.UpEmailCode({body:{recipient:this.formFields[0].value,code:this.formFields[1].value}},(function(){e.$cf.showConfirmSuccessDialog({title:e.$t("proceCode.CertificationSuccessful"),onConfirm:function(){e.$router.push("/perSettings")}})}),(function(){e.$cf.showErrorMessageDialog(e.$t("proceCode.AuthenticationFailed"))}));else if("mobile"===this.type){var t={body:{recipient:this.phoneNumber,code:this.formFields[1].value}};Object(s["c"])()&&(t.body.memberId=localStorage.getItem("memberId")),this.$api.register.mobileAuth(t,(function(){e.$cf.showConfirmSuccessDialog({title:e.$t("proceCode.CertificationSuccessful"),onConfirm:function(){e.$router.push("/perSettings")}})}),(function(){e.$cf.showErrorMessageDialog(e.$t("proceCode.AuthenticationFailed"))}))}else"wechat"===this.type&&this.$api.my.memberWechat({body:{wechat:this.formFields[1].value}},(function(){e.$cf.showConfirmSuccessDialog({title:e.$t("proceCode.SubmitCertificationSuccess"),onConfirm:function(){e.$router.push("/perSettings")}})}),(function(){e.$cf.showErrorMessageDialog(e.$t("proceCode.SubmitAuthenticationFailure"))}))},goBack:function(){this.$router.push("/perSettings")}},created:function(){this.setData()}},c=u,f=(i("fa66"),i("2877")),d=Object(f["a"])(c,o,n,!1,null,null,null);t["default"]=d.exports},"655c":function(e,t,i){"use strict";t["a"]={cn:{phoneNumberLengh:11,ruleName:"phoneNumRuleCN",blackRuleName:"phoneBlackListCN"},th:{phoneNumberLengh:10,ruleName:"phoneNumRuleTH",blackRuleName:"phoneBlackListTH"}}},"8cae":function(e,t,i){"use strict";var o,n=i("9ccf"),a=n.getPhoneNumWithNationCode,r=n.getNationCodes;o={},t["a"]={data:function(){return{nationCode:"66",nationCodes:r()}},methods:{getPhoneNumWithNationCode:function(e){return a(e)}},components:o}},d787:function(e,t,i){},f2dc:function(e,t,i){"use strict";var o=i("72f2");t["a"]={strnumDa6:function(e){var t=/^[a-zA-Z0-9]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入6位以上数字或字母"}},passwordValid:function(e){var t=/^[a-zA-Z0-9_]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式須由 6~16 位半形英数字及下底線组成"}},BDYPasswordValid:function(e){var t=/^[a-zA-Z0-9]{6,16}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式須由 6~16 位半形英数字"}},BFDrawNumber:function(e){var t=/^[0-9]{4,8}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，请设定 4~8 位数字密码"}},BDYDrawNumber:function(e){var t=/^[0-9]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，请设定 6 位数字密码"}},BFAccount:function(e){var t=/^BF[a-zA-Z0-9]{4,}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为BF开头且符合 6~14 位"}},EDFAccount:function(e){var t=/^EDF[a-zA-Z0-9]{4,}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为EDF开头且符合 6~14 位"}},BDYAcount:function(e){var t=/^[a-zA-Z0-9]{4,12}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号长度必须为 4~12 位半形英数字"}},THAcount:function(e){var t=/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"账号格式为6-10位英文+数字的組合"}},THAcountLogin:function(e){var t=/^[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"账号格式为6-10位英文+数字的組合"}},LOAccountLogin:function(e){var t=/^LE[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为LE开头且符合 8~12 位"}},THPasswordValid:function(e){var t=/^[a-zA-Z0-9_]{6,16}$/,i=new RegExp(t);return{flag:i.test(e),text:"密码格式为6-16位英数字及 '_'"}},THRealName:function(e){var t=/^[a-zA-Z\u4E00-\u9FA5\u0E01-\u0E5B ]{2,128}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},phoneNum:function(e,t,i,o){var n;if(e){n=i?this[i.ruleName](e,t,o):this.phoneNumRuleCN(e,t,o);var a=i?this[i.blackRuleName](e,t,o):this.phoneBlackListCN(e,t,o);return a.flag||(n=a),n}},phoneNumRuleTH:function(e){var t=/^\d{9,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"手机号码格式错误"}},phoneNumRuleCN:function(e){var t=/^1\d{10}$/,i=new RegExp(t);return{flag:i.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码格式错误"}},phoneBlackListCN:function(e,t,i){t=t||o["a"].state.notAllowPhoneNumber,i=i||o["a"].state.nationCode;var n=i;i||(n=""===i?"86":"66");var a=[],r=!0;t.split("|").forEach((function(e){var t=e.split("-");t.length<2&&(r=!1),t[0]===n&&a.push(t[1])}));var s=r?a.join("|"):t,l="^(".concat(s,"){1,}[0-9]{8,9}$"),u=new RegExp(l);return{flag:!u.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码无法使用，请联系客服"}},phoneBlackListTH:function(e,t,i){t=t||o["a"].state.notAllowPhoneNumber,i=i||o["a"].state.nationCode;var n=i;i||(n=""===i?"86":"66");var a=[],r=!0;t.split("|").forEach((function(e){var t=e.split("-");t.length<2&&(r=!1),t[0]===n&&a.push(t[1])}));var s=r?a.join("|"):t,l="^(".concat(s,"){1,}[0-9]{6,8}$"),u=new RegExp(l);return{flag:!u.test(e),text:"手机号码无法使用，请联系客服"}},email:function(e){var t=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的邮箱号码格式"}},yuming:function(e){var t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\/.?/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的域名格式"}},shenfenz:function(e){var t=/(^d{15}$)|(^d{17}([0-9]|X)$)/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的身份证号码格式"}},number:function(e){var t=/^[0-9]*$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入数字"}},hanzi:function(e){var t=/^[\u4e00-\u9fa5·．]{0,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},BDYRealName:function(e){var t=/^[\u4e00-\u9fa5·．]{2,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},strnum:function(e){var t=/^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入数字或字母"}},noFullWidth:function(e){var t=/[\uff00-\uffff]/g,i=new RegExp(t);return{flag:!i.test(e),text:"格式错误，不可包含全形"}},validYoung:function(e){var t=new Date,i=new Date(e),o=t.getFullYear()-i.getFullYear(),n=t.getMonth()-i.getMonth();return(n<0||0===n&&t.getDate()<i.getDate())&&(o-=1),{flag:o>=18,text:"未满18岁，无法注册"}},specialCharacters:function(e){var t=/^[A-Za-z0-9\u4e00-\u9fa5]{1,20}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，限中、英、数字"}}}},fa66:function(e,t,i){"use strict";var o=i("d787"),n=i.n(o);n.a}}]);