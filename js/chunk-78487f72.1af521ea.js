(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78487f72"],{"261e":function(t,e,s){},"51b6":function(t,e,s){"use strict";var i=s("261e"),a=s.n(i);a.a},"655c":function(t,e,s){"use strict";e["a"]={cn:{phoneNumberLengh:11,ruleName:"phoneNumRuleCN",blackRuleName:"phoneBlackListCN"},th:{phoneNumberLengh:10,ruleName:"phoneNumRuleTH",blackRuleName:"phoneBlackListTH"}}},6941:function(t,e,s){"use strict";e["a"]={data(){return{limit:null}},methods:{getPlayerDrawingLimit(){this.$api.cardList.getPlayerDrawingLimit({body:{}},t=>{this.limit=t.data.onceWithdrawLowerLimit/100})},goDeposit(t){this.$router.push(t)}},computed:{allBalance(){return this.$store.state.allBalance||Number(localStorage.getItem("allBalance"))},totalAskPoint(){return this.$store.state.userInfo.totalAskPoint},validPoint(){return this.$store.state.userInfo.validPoint},disparity(){return this.totalAskPoint<=this.validPoint?"0":this.$cf.toComma(this.totalAskPoint-this.validPoint)},isReach(){return this.validPoint>=this.totalAskPoint&&this.allBalance/100>=this.limit}}}},e953:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"integral-mall-list-container"},[s("div",{staticClass:"sort-wrap"},[t._v(" "+t._s(t.$t("integralMallList.SortBy"))+" "),s("BaseButton",{staticClass:"card-btn",class:{isBtnActive:2===t.sort},on:{click:function(e){return t.sortQuery(2)}}},[t._v(t._s(t.$t("integralMallList.LowToHigh")))]),s("BaseButton",{staticClass:"card-btn",class:{isBtnActive:1===t.sort},on:{click:function(e){return t.sortQuery(1)}}},[t._v(t._s(t.$t("integralMallList.HighToLow")))])],1),s("BaseScroller",{attrs:{"scroller-height":t.scrollerHeight}},[s("van-list",{attrs:{finished:t.finished,offset:"100","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"mall-list"},t._l(t.integerList,(function(e){return s("div",{key:e.id,staticClass:"card-wrap"},[s("div",{staticClass:"card-img-wrap"},[s("img",{staticClass:"card-img",attrs:{src:e.imgUrl,alt:""}})]),s("div",{staticClass:"card-name"},[s("p",[t._v(t._s(e.name))])]),s("div",{staticClass:"card-points"},[t._v(t._s(e.merchandiseJifen/100)+" "+t._s(t.$t("integralMallList.Points")))]),s("div",{staticClass:"card-btn"},[s("BaseButton",{staticClass:"exchange-btn",attrs:{disabled:!t.canBuy(e.merchandiseJifen)},on:{click:function(s){return t.checkConvert(t.pageType,e)}}},[t._v(t._s(t.canBuy(e.merchandiseJifen)?t.$t("integralMallList.Exchange"):t.$t("integralMallList.NotEnough")))])],1),s("div",{staticClass:"card-description-wrap"},[s("span",{staticClass:"card-description",on:{click:function(s){return t.onChangeGoodsDetail(e)}}},[t._v(t._s(t.$t("integralMallList.Description")))])])])})),0)])],1),s("BaseDialog",{staticClass:"chip-dialog",attrs:{"show-confirm-button":!0,"show-cancel-button":!0,title:t.$t("integralMallList.ExchangeConfirmation")},on:{confirm:t.onConfirmChips,cancel:t.close,close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"col"},[s("span",[t._v(t._s(t.$t("integralMallList.Item")))]),s("span",{staticClass:"text-red"},[t._v(t._s(t.selectedItem.name))])]),s("div",{staticClass:"col"},[s("span",[t._v(t._s(t.$t("integralMallList.PointsAfterDiscount")))]),s("span",{staticClass:"text-red"},[t._v(t._s(t.selectedItem.merchandiseJifen/100)+" "+t._s(t.$t("integralMallList.Points")))])])]},proxy:!0}]),model:{value:t.isShowChipDialog,callback:function(e){t.isShowChipDialog=e},expression:"isShowChipDialog"}}),s("BaseDialog",{staticClass:"show-received-dialog",attrs:{title:t.$t("integralMallList.ReceiveInformation"),"show-confirm-button":!0,"show-cancel-button":!0},on:{confirm:t.onConfirmReceived,cancel:t.close,close:t.close},scopedSlots:t._u([{key:"content",fn:function(){return[s("van-form",{ref:"receivedForm",attrs:{"validate-trigger":"onChange"}},[s("BaseCell",{staticClass:"name-column",attrs:{fullWidth:!0},scopedSlots:t._u([{key:"left",fn:function(){return[t._v(t._s(t.$t("integralMallList.Name")))]},proxy:!0},{key:"right",fn:function(){return[s("div",{staticClass:"username-ellipsis"},[t._v(t._s(t.omitInfo(t.userInfo.realname)))])]},proxy:!0}])}),s("div",{staticClass:"form-label"},[t._v(t._s(t.$t("integralMallList.ContactNumber")))]),s("div",{staticClass:"col-2"},[s("div",{staticClass:"prefix"},[s("van-field",t._b({key:t.formFields[0].name,scopedSlots:t._u([{key:"input",fn:function(){return[s("span",[t._v("+")]),s("CustomVanFieldInput",{attrs:{validatedState:t.formFields[0].state,inputClass:t.formFields[0].inputClass,placeholder:t.formFields[0].placeholder,type:t.formFields[0].type,maxlength:t.formFields[0].maxlength},on:{"update:type":function(e){return t.$set(t.formFields[0],"type",e)}},model:{value:t.formFields[0].value,callback:function(e){t.$set(t.formFields[0],"value",e)},expression:"formFields[0].value"}})]},proxy:!0}])},"van-field",t.formFields[0],!1))],1),s("div",{staticClass:"phone"},[s("van-field",t._b({key:t.formFields[1].name,scopedSlots:t._u([{key:"input",fn:function(){return[s("CustomVanFieldInput",{attrs:{validatedState:t.formFields[1].state,inputClass:t.formFields[1].inputClass,placeholder:t.formFields[1].placeholder,type:t.formFields[1].type,maxlength:t.formFields[1].maxlength},on:{"update:type":function(e){return t.$set(t.formFields[1],"type",e)}},model:{value:t.formFields[1].value,callback:function(e){t.$set(t.formFields[1],"value",e)},expression:"formFields[1].value"}})]},proxy:!0}])},"van-field",t.formFields[1],!1))],1)]),s("div",{staticClass:"form-label"},[t._v(t._s(t.$t("integralMallList.ShippingAddress")))]),s("van-field",t._b({key:t.formFields[2].name,scopedSlots:t._u([{key:"input",fn:function(){return[s("CustomVanFieldInput",{attrs:{validatedState:t.formFields[2].state,inputClass:t.formFields[2].inputClass,placeholder:t.formFields[2].placeholder,type:t.formFields[2].type,maxlength:t.formFields[2].maxlength},on:{"update:type":function(e){return t.$set(t.formFields[2],"type",e)}},model:{value:t.formFields[2].value,callback:function(e){t.$set(t.formFields[2],"value",e)},expression:"formFields[2].value"}})]},proxy:!0}])},"van-field",t.formFields[2],!1))],1)]},proxy:!0}]),model:{value:t.isShowReceivedDialog,callback:function(e){t.isShowReceivedDialog=e},expression:"isShowReceivedDialog"}}),s("GoodsDetailDialog",{attrs:{isShow:t.isShowGoodsDetail,goodsDetailItem:t.selectedItem},on:{closeGoodsDetailDialog:t.closeGoodsDetailDialog}})],1)},a=[],n=s("f2dc"),l=s("655c"),o=s("a79b"),r=s("6941"),c={name:"IntegralMallList",mixins:[r["a"]],props:{pageType:Number,userInfo:Object},data(){return{sort:2,isShowGoodsDetail:!1,integerList:[],selectedItem:{},isShowChipDialog:!1,isShowReceivedDialog:!1,isSorting:!1,scrollerHeight:"calc(100vh - 180px)",pageNum:1,loading:!1,finished:!1,debounceDo:Object(o["b"])(this.getQueryListH5,200),formFields:[{name:"prefix",value:"66",placeholder:"",maxlength:2,rules:[{required:!0,message:"required"},{message:this.$t("integralMallList.ValidateMsgPrefix"),validator:t=>{if(t){const e=n["a"].number(t);return e.flag}}}]},{name:"phone",value:"",placeholder:this.$t("integralMallList.PhonePlaceholder"),maxlength:9,rules:[{required:!0,message:this.$t("integralMallList.ValidateMsgPhone1")},{message:this.$t("integralMallList.ValidateMsgPhone2"),validator:t=>{if(t){const e=n["a"].phoneNum(t,this.notAllowPhoneNumber,l["a"].th);return e.flag}}}]},{name:"address",value:"",placeholder:this.$t("integralMallList.AddressPlaceholder"),maxlength:100,rules:[{required:!0,message:this.$t("integralMallList.ValidateMsgAddress")}]}]}},methods:{sortQuery(t){this.sort=t,this.isSorting=!0,this.pageNum=1,this.integerList=[],this.getQueryListH5()},getQueryListH5(){const t={body:{type:this.pageType+1,sort:this.sort},pageBean:{page:this.pageNum,pageSize:15}};this.finished&&!this.isSorting||this.$api.actiList.queryListH5List(t,t=>{var e,s;this.integerList=this.integerList.concat(null===(e=t.data)||void 0===e?void 0:e.data)||[],this.finished=!(null!==(s=t.data)&&void 0!==s&&s.hasNextPage),this.loading=!1}),this.isSorting=!1},canBuy(t){return this.userInfo.jifen>=t/100},onChangeGoodsDetail(t){this.selectedItem=t,this.isShowGoodsDetail=!0},closeGoodsDetailDialog(t){this.isShowGoodsDetail=t},checkConvert(t,e){this.selectedItem=e,0===t?(this.$store.dispatch("getAllBalance",{vm:this}),this.isShowChipDialog=!0):1===t&&(this.isShowReceivedDialog=!0)},onLoad(){this.pageNum++,this.debounceDo()},onConfirmChips(){this.$api.actiList.exchange({body:{merchandiseId:this.selectedItem.id}},()=>{this.$emit("getUserInfo"),this.$cf.showConfirmSuccessDialog({message:this.$t("integralMallList.ExchangeSuccess")}),this.isShowChipDialog=!1},t=>{this.$cf.showConfirmDialog({message:t.message})})},getParam(){return{name:this.userInfo.realname,mobile:`${this.formFields[0].value}-${this.formFields[1].value}`,address:this.formFields[2].value,merchandiseId:this.selectedItem.id}},sendReceivedForm(){this.$api.actiList.exchange({body:this.getParam()},()=>{this.$emit("getUserInfo"),this.$cf.showConfirmSuccessDialog({message:this.$t("integralMallList.ExchangeSuccess")}),this.isShowReceivedDialog=!1},t=>{this.$cf.showConfirmDialog({message:t.message})})},onConfirmReceived(){this.$refs.receivedForm.validate().then(t=>{void 0===t&&this.sendReceivedForm()})},close(){this.isShowChipDialog=!1,this.isShowReceivedDialog=!1},omitInfo(t){if(void 0!==t){if(t.length>=32){const e=t.substring(0,31);return e+" ..."}return t}return"--"}},created(){this.getQueryListH5(),this.getPlayerDrawingLimit()},components:{GoodsDetailDialog:()=>s.e("chunk-ceb9c322").then(s.bind(null,"9e26")),CustomVanFieldInput:()=>s.e("chunk-50b477c4").then(s.bind(null,"5623"))}},u=c,d=(s("51b6"),s("2877")),h=Object(d["a"])(u,i,a,!1,null,null,null);e["default"]=h.exports},f2dc:function(t,e,s){"use strict";var i=s("72f2");e["a"]={strnumDa6(t){const e=/^[a-zA-Z0-9]{6,}$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入6位以上数字或字母"}},passwordValid(t){const e=/^[a-zA-Z0-9_]{6,}$/,s=new RegExp(e);return{flag:s.test(t),text:"格式須由 6~16 位半形英数字及下底線组成"}},BDYPasswordValid(t){const e=/^[a-zA-Z0-9]{6,16}$/,s=new RegExp(e);return{flag:s.test(t),text:"格式須由 6~16 位半形英数字"}},BFDrawNumber(t){const e=/^[0-9]{4,8}$/,s=new RegExp(e);return{flag:s.test(t),text:"格式错误，请设定 4~8 位数字密码"}},BDYDrawNumber(t){const e=/^[0-9]{6,}$/,s=new RegExp(e);return{flag:s.test(t),text:"格式错误，请设定 6 位数字密码"}},BFAccount(t){const e=/^BF[a-zA-Z0-9]{4,}$/,s=new RegExp(e);return{flag:s.test(t),text:"帐号格式必须为BF开头且符合 6~14 位"}},EDFAccount(t){const e=/^EDF[a-zA-Z0-9]{4,}$/,s=new RegExp(e);return{flag:s.test(t),text:"帐号格式必须为EDF开头且符合 6~14 位"}},BDYAcount(t){const e=/^[a-zA-Z0-9]{4,12}$/,s=new RegExp(e);return{flag:s.test(t),text:"帐号长度必须为 4~12 位半形英数字"}},THAcount(t){const e=/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{6,10}$/,s=new RegExp(e);return{flag:s.test(t),text:"账号格式为6-10位英文+数字的組合"}},THAcountLogin(t){const e=/^[a-zA-Z0-9]{6,10}$/,s=new RegExp(e);return{flag:s.test(t),text:"账号格式为6-10位英文+数字的組合"}},LOAccountLogin(t){const e=/^LE[a-zA-Z0-9]{6,10}$/,s=new RegExp(e);return{flag:s.test(t),text:"帐号格式必须为LE开头且符合 8~12 位"}},THPasswordValid(t){const e=/^[a-zA-Z0-9_]{6,16}$/,s=new RegExp(e);return{flag:s.test(t),text:"密码格式为6-16位英数字及 '_'"}},THRealName(t){const e=/^[a-zA-Z\u4E00-\u9FA5\u0E01-\u0E5B ]{2,128}$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入汉字"}},phoneNum(t,e,s,i){let a;if(t){a=s?this[s.ruleName](t,e,i):this.phoneNumRuleCN(t,e,i);const n=s?this[s.blackRuleName](t,e,i):this.phoneBlackListCN(t,e,i);return n.flag||(a=n),a}},phoneNumRuleTH(t){const e=/^\d{9,10}$/,s=new RegExp(e);return{flag:s.test(t),text:"手机号码格式错误"}},phoneNumRuleCN(t){const e=/^1\d{10}$/,s=new RegExp(e);return{flag:s.test(t)&&11===t.length&&t.startsWith("1"),text:"手机号码格式错误"}},phoneBlackListCN(t,e,s){e=e||i["a"].state.notAllowPhoneNumber,s=s||i["a"].state.nationCode;let a=s;s||(a=""===s?"86":"66");const n=[];let l=!0;e.split("|").forEach(t=>{const e=t.split("-");e.length<2&&(l=!1),e[0]===a&&n.push(e[1])});const o=l?n.join("|"):e,r=`^(${o}){1,}[0-9]{8,9}$`,c=new RegExp(r);return{flag:!c.test(t)&&11===t.length&&t.startsWith("1"),text:"手机号码无法使用，请联系客服"}},phoneBlackListTH(t,e,s){e=e||i["a"].state.notAllowPhoneNumber,s=s||i["a"].state.nationCode;let a=s;s||(a=""===s?"86":"66");const n=[];let l=!0;e.split("|").forEach(t=>{const e=t.split("-");e.length<2&&(l=!1),e[0]===a&&n.push(e[1])});const o=l?n.join("|"):e,r=`^(${o}){1,}[0-9]{6,8}$`,c=new RegExp(r);return{flag:!c.test(t),text:"手机号码无法使用，请联系客服"}},email(t){const e=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入正确的邮箱号码格式"}},yuming(t){const e=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\/.?/,s=new RegExp(e);return{flag:s.test(t),text:"请输入正确的域名格式"}},shenfenz(t){const e=/(^d{15}$)|(^d{17}([0-9]|X)$)/,s=new RegExp(e);return{flag:s.test(t),text:"请输入正确的身份证号码格式"}},number(t){const e=/^[0-9]*$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入数字"}},hanzi(t){const e=/^[\u4e00-\u9fa5·．]{0,}$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入汉字"}},BDYRealName(t){const e=/^[\u4e00-\u9fa5·．]{2,}$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入汉字"}},strnum(t){const e=/^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$/,s=new RegExp(e);return{flag:s.test(t),text:"请输入数字或字母"}},noFullWidth(t){const e=/[\uff00-\uffff]/g,s=new RegExp(e);return{flag:!s.test(t),text:"格式错误，不可包含全形"}},validYoung(t){const e=new Date,s=new Date(t);let i=e.getFullYear()-s.getFullYear();const a=e.getMonth()-s.getMonth();return(a<0||0===a&&e.getDate()<s.getDate())&&(i-=1),{flag:i>=18,text:"未满18岁，无法注册"}},specialCharacters(t){const e=/^[A-Za-z0-9\u4e00-\u9fa5]{1,20}$/,s=new RegExp(e);return{flag:s.test(t),text:"格式错误，限中、英、数字"}}}}}]);