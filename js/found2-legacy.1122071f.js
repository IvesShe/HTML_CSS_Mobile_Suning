(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["found2"],{"60b6":function(t,e,n){"use strict";var o=n("e1f6"),i=n.n(o);i.a},7124:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"found2-container"},[n("TheHeader",{staticClass:"transparent",attrs:{title:t.$t("found2.FindPwd"),"left-arrow":"",leftClick:t.goBack}}),n("div",{staticClass:"found2-form-box"},[n("van-notice-bar",{attrs:{wrapable:"",text:t.$t("found1.FindPwdTip")}}),n("div",{staticClass:"title"},[t._v(t._s(t.$t("found2.SelectVerificationMethod")))]),n("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:t.nextStep}},[n("div",{staticClass:"radio-container"},[n("van-radio-group",{model:{value:t.verificationMethod,callback:function(e){t.verificationMethod=e},expression:"verificationMethod"}},[t.found2&&t.found2.mobile&&t.found2.mobileIsVerified?n("van-radio",{attrs:{name:"1"}},[t._v(t._s(t.$t("found2.MobileValidation")))]):t._e(),t.found2&&t.found2.email&&t.found2.emailIsVerified?n("van-radio",{attrs:{name:"2"}},[t._v(t._s(t.$t("found2.EmailValidation")))]):t._e()],1)],1),n("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.UserAccount")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t.username))]},proxy:!0}])}),"1"===t.verificationMethod?n("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.MobileNumber")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t._f("hideMobile")(t.found2.mobile)))]},proxy:!0}],null,!1,2096646383)}):t._e(),"2"===t.verificationMethod?n("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.Emal")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t.found2.email))]},proxy:!0}],null,!1,4294007196)}):t._e(),n("BaseCell",{scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("found2.EnterValidateCode")))]},proxy:!0}])}),n("van-cell-group",{staticClass:"code-input-wrap"},[n("van-field",{attrs:{maxlength:"10",placeholder:t.$t("found2.EnterValidateCode")},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("van-button",{staticClass:"field-btn",attrs:{disabled:!t.flag},on:{click:function(e){return e.preventDefault(),t.sendCode(e)}}},[t._v(t._s(t.buttonText))])],1),n("div",{staticClass:"van-cell"},[n("van-button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:t.buttonDisabled}},[t._v(t._s(t.$t("found2.Next")))])],1)],1)],1)],1)},i=[],s={name:"Found2",data:function(){return{verificationMethod:"",code:"",count:60,flag:!0,timer:"",buttonText:this.$t("found2.GetValidateCode"),buttonDisabled:!0}},computed:{username:function(){return this.$store.state.passport.username},found2:function(){return this.$store.state.passport.found2}},watch:{code:{handler:function(t){this.buttonDisabled=!t}}},beforeDestroy:function(){window.clearTimeout(this.timer),this.count=60,this.flag=!0},created:function(){var t=this;this.found2?this.$api.register.phoneFormatVerify({},(function(e){t.notAllowPhoneNumber=e.data.regTelNotAllow.split(",").join("|")})):this.$router.push("/found1")},methods:{getCode:function(){var t=this;if(0===this.count)return this.count=60,this.flag=!0,this.buttonText=this.$t("found2.GetValidateCode"),void window.clearTimeout(this.timer);this.buttonText="".concat(this.count,"s ").concat(this.$t("found2.Resend")),this.count--,this.timer=setTimeout((function(){t.getCode()}),1e3)},sendPhoneCode:function(){var t=this;this.$api.found.getBackPassword({body:{username:this.username,phoneNumber:this.found2.mobile}},(function(){t.flag=!1,t.getCode(),t.$cf.showSuccessMessageDialog(t.$t("found2.MobileSendSuccess"))}))},sendMailCode:function(){var t=this;this.$api.found.getBackPassword({body:{username:this.username,mail:this.found2.email}},(function(){t.flag=!1,t.getCode(),t.$cf.showSuccessMessageDialog(t.$t("found2.MailSendSuccess"))}))},sendCode:function(){"1"===this.verificationMethod?this.sendPhoneCode():"2"===this.verificationMethod&&this.sendMailCode()},nextStep:function(){var t,e=this,n="",o=this.verificationMethod;"1"===this.verificationMethod?t=this.found2.mobile:"2"===this.verificationMethod&&(t=this.found2.email),n=this.code,this.$api.found.authCode({body:{code:n,method:t,username:this.username,methodType:o}},(function(){e.$cf.showSuccessMessageDialog(e.$t("found2.VerifySuccess")),e.$router.push("/found3")}))},goBack:function(){this.$router.push("/found1")}},filters:{hideMobile:function(t){var e=t.toString();return"".concat(e.substr(0,2),"＊＊＊＊＊＊＊＊").concat(e.substr(e.length-1,1))},hideEmail:function(t){var e=t.split("@"),n=e[0].split("");return"".concat(n.map((function(t,e){return 0!==e&&e!==n.length-1?"＊":t})).join(""),"@").concat(e[1])}}},a=s,u=(n("60b6"),n("2877")),d=Object(u["a"])(a,o,i,!1,null,null,null);e["default"]=d.exports},e1f6:function(t,e,n){}}]);