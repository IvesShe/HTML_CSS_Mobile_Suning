(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CardList"],{"1a69":function(t,i,e){"use strict";var a=e("c108"),n=e.n(a);n.a},"6df0":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"card-list-container"},[e("TheHeader",{attrs:{title:t.$t("cardList.BankCard"),"left-arrow":"","left-click":t.goBack,isFixedTop:!0}}),t.isEditing?t._e():e("div",{staticClass:"center_align"},[t.isShowAdd?e("BaseButton",{staticClass:"card-btn",on:{click:function(i){return t.$router.push({path:"/bankCard"})}}},[t._v(t._s(t.$t("cardList.NewCard")))]):t._e(),t.cardList.length>0?e("BaseButton",{staticClass:"card-btn",on:{click:t.onEdit}},[t._v(t._s(t.$t("cardList.Edit")))]):t._e()],1),e("div",{staticClass:"card-list-box"},t._l(t.cardList,(function(i){return e("BankCard",{key:i.id,attrs:{item:i,"is-editing":t.isEditing,"is-main-card":t.getIsMainCard(i)},on:{delete:t.confirmDel,select:t.onMainCardSelect}})})),1),t.isEditing?e("div",{staticClass:"center_align"},[t.isShowAdd?e("BaseButton",{staticClass:"card-btn",on:{click:t.onSave}},[t._v(t._s(t.$t("cardList.Save")))]):t._e(),t.cardList.length>0?e("BaseButton",{staticClass:"card-btn",on:{click:t.onCancel}},[t._v(t._s(t.$t("cardList.Cancel")))]):t._e()],1):t._e(),e("BaseDialog",{attrs:{"show-confirm-button":!1},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"role-wrap"},[e("div",{staticClass:"icon"},[e("i",{staticClass:"ic36-game4"})]),e("p",{staticClass:"dialog-title"},[t._v(t._s(t.$t("cardList.RemoveCardSuccess")))]),e("hr"),e("p",{staticClass:"bank-name2"},[t._v(t._s(4===t.deletingItem.accountType?t.deletingItem.accountAddress:t.deletingItem.bankName))]),e("p",[t._v(t._s(t.deletingItem.accountNumber))])])]},proxy:!0}]),model:{value:t.showResultDialog,callback:function(i){t.showResultDialog=i},expression:"showResultDialog"}})],1)},n=[],s=e("a79b"),c={id:"",bankName:"",accountNumber:""},o={name:"CardList",data:function(){return{cardList:[],isShowAdd:!1,realName:"",isEditing:!1,showConfirmDialog:!1,showResultDialog:!1,deletingItem:c,mainCardItem:c,cachedMainCardItem:c}},created:function(){this.init()},methods:{init:function(){var t=this;this.$api.my.getPerInfo({body:{}},(function(i){t.realName=i.data.realname})),this.$api.cardList.getAccoutList({body:{}},(function(i){var e;t.cardList=(null===(e=i.data)||void 0===e?void 0:e.list)||[],t.mainCardItem=t.cardList.find((function(t){return 1===t.mainCard}))||c,t.cachedMainCardItem=t.mainCardItem,t.$api.cardList.getPlayerDrawingLimit({body:{}},(function(i){t.isShowAdd=t.cardList.length<i.data.onceWithdrawAccountCountUpperLimit}))}))},onSave:function(){var t=this;this.mainCardItem.id?this.$api.cardList.editWithdrawAccount({body:{id:this.mainCardItem.id}},(function(){t.$cf.showSuccessMessageDialog(t.$t("cardList.SetMainCardSuccess")),t.cachedMainCardItem=t.mainCardItem,Object(s["e"])(3e3).then((function(){t.isEditing=!1})),t.init()})):this.$cf.showErrorMessageDialog(this.$t("cardList.ChooseOneCard"))},onMainCardSelect:function(t){this.mainCardItem=t},getIsMainCard:function(t){return this.mainCardItem.id===t.id},onEdit:function(){this.isEditing=!0},onCancel:function(){this.mainCardItem=this.cachedMainCardItem,this.isEditing=!1},confirmDel:function(t){this.deletingItem=t,this.$store.commit("setDialog",{title:this.$t("bankCardEdit.RemoveTheBankCard"),message:'\n        <div class="role-wrap">\n          <hr />\n          <p class="bank-name" style="word-break: break-all;">'.concat(this.deletingItem.accountNumber,"</p>\n          <p>").concat(4===this.deletingItem.accountType?this.deletingItem.accountAddress:this.deletingItem.bankName,'</p>\n          <p class="tip">').concat(this.$t("cardList.RemoveCardMsg"),"</p>\n        </div>\n        "),iconName:"error",confirmText:this.$t("Confirm"),cancelText:this.$t("Cancel"),onConfirm:this.onRemove,onCancel:this.closeDialog})},onRemove:function(){var t=this;this.$api.cardList.deleteWithdrawAccount({body:{id:this.deletingItem.id}},(function(){t.showResultDialog=!0,Object(s["e"])(2e3).then((function(){t.showResultDialog=!1,Object(s["e"])(1e3).then((function(){t.deletingItem=c})),t.init(),t.isEditing=!1}))}))},closeDialog:function(){this.isShowDialog=!1,this.deletingItem=c},goBack:function(){this.$cf.goBack(this.$route)}},components:{TheHeader:function(){return Promise.resolve().then(e.bind(null,"2ab4"))},BankCard:function(){return e.e("chunk-7b06bee5").then(e.bind(null,"18e2"))}}},d=o,r=(e("1a69"),e("2877")),l=Object(r["a"])(d,a,n,!1,null,"3e1a19d6",null);i["default"]=l.exports},c108:function(t,i,e){}}]);