(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["activityTabList"],{"058a":function(t,i,e){},"37ca":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-tab-list-container"},[e("TheHeader",{attrs:{"left-arrow":"",title:t.$t("activityTabList.Promotions"),"left-click":t.goBack,isFixedTop:!0}}),e("van-tabs",{attrs:{swipeable:"",animated:""},on:{click:t.onTab},model:{value:t.activeIndex,callback:function(i){t.activeIndex=i},expression:"activeIndex"}},t._l(t.activityTypes,(function(i){return e("van-tab",{key:i.id,attrs:{title:i.name}},[e("BaseScroller",{attrs:{"scroller-height":t.scrollerHeight}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(i){t.refreshing=i},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,offset:"100","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.activityList,(function(i){return e("ActivityItem",{key:i.id,attrs:{item:i,round:"",width:"325px"},nativeOn:{click:function(e){return t.openActivity(i)}}})})),1)],1)],1)],1)})),1)],1)},a=[],s=e("a79b"),c={name:"ActivityTabList",data:function(){return{scrollerHeight:"calc(100vh - 90px)",refreshing:!1,loading:!1,finished:!1,activeIndex:0,activityList:[],activityTypes:[],cateId:"",pageNum:1,debounceDo:Object(s["b"])(this.getActivityList,200)}},created:function(){this.getActivityType(),this.getActivityList(),window.gtag("event","优惠活动")},methods:{goBack:function(){this.$router.go(-1)},onRefresh:function(){this.finished=!1,this.loading=!0,this.getActivityList()},onLoad:function(){this.pageNum++,this.debounceDo()},onTab:function(){this.cateId=this.activityTypes[this.activeIndex].id||"",this.refreshing=!0,this.onRefresh()},openActivity:function(t){1===t.type?this.$router.push({path:"/activity",query:{id:t.id,cateId:t.cateId}}):window.open(t.externalLink,"_self")},getActivityType:function(){var t=this;this.$api.youhuiActivity.getActivityType({body:{}},(function(i){var e;null===(e=i.data)||void 0===e||e.unshift({name:t.$t("activityTabList.AllOffers"),id:""}),t.activityTypes=i.data}))},getActivityList:function(){var t=this;this.refreshing&&(this.activityList=[],this.pageNum=1,this.refreshing=!1),this.finished||this.$api.youhuiActivity.getActivityList({body:{state:1,cateId:this.cateId},pageBean:{page:this.pageNum,pageSize:15}},(function(i){var e,n;t.activityList=t.activityList.concat(null===(e=i.data)||void 0===e?void 0:e.data)||[],t.finished=!(null!==(n=i.data)&&void 0!==n&&n.hasNextPage),t.loading=!1}))}},components:{ActivityItem:function(){return e.e("chunk-77db6878").then(e.bind(null,"23e7f"))}}},o=c,r=(e("70ee"),e("2877")),d=Object(r["a"])(o,n,a,!1,null,null,null);i["default"]=d.exports},"70ee":function(t,i,e){"use strict";var n=e("058a"),a=e.n(n);a.a}}]);