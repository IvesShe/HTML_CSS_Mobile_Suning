(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LineDrawing"],{"31a5":function(t,e,a){},"4ff7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"line-drawing-container"},[a("TheHeader",{attrs:{"left-arrow":"",title:t.$t("lineDrawing.Withdrawal"),"left-click":t.goBack}}),a("div",{staticClass:"row-section"},[a("BaseCell",{attrs:{fullWidth:""},scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("lineDrawing.RealName")))]},proxy:!0},{key:"right",fn:function(){return[t._v(t._s(t.omitInfo(t.userObj.realname)))]},proxy:!0}])})],1),a("div",{staticClass:"row-section"},[a("p",[t._v(t._s(t.$t("lineDrawing.WithdrawalAccount")))]),a("div",{staticClass:"card-info-box",on:{click:function(e){t.isAccountSheetShow=!0}}},[a("div",[a("p",{staticClass:"title"},[t._v(t._s(t.formData.bankName||t.$t("lineDrawing.BankName")))]),a("p",{staticClass:"card-no"},[t._v(t._s(t.formData.accountNumber))])]),a("div",[a("van-icon",{attrs:{name:"arrow-down"}})],1)])]),a("div",{staticClass:"row-section"},[a("BaseCell",{attrs:{fullWidth:""},scopedSlots:t._u([{key:"middle",fn:function(){return[t._v(t._s(t.$t("lineDrawing.TakeableAmount")))]},proxy:!0},{key:"right",fn:function(){return[t._v(" "+t._s(null===t.allBalance?"--":t.$cf.toComma(t.allBalance))+" "),a("BalanceButton",{on:{refresh:t.onRefreshAccount}})]},proxy:!0}])})],1),a("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:t.onSubmit}},[a("div",{staticClass:"row-section"},[a("div",[a("TransparentFieldInput",{attrs:{type:"number",useStateIcon:!1,placeholder:t.drawingLimit.onceWithdrawLowerLimit+" ~ "+t.drawingLimit.onceWithdrawUpperLimit,bind:t.amountField},model:{value:t.amountField.value,callback:function(e){t.$set(t.amountField,"value",e)},expression:"amountField.value"}})],1),t.formData.bankId?t._e():a("div",{staticClass:"usdt-wrap"},[a("div",{staticClass:"usdt-price"},[t._v("1 USDT ≈ "+t._s(t.price)+" THB")]),a("div",{staticClass:"usdt-price"},[t._v(t._s(t.$t("lineDrawing.RealIncome"))+" ≈ "+t._s(t.USDTAmount)+" USDT")])]),a("div",[a("TransparentFieldInput",{attrs:{type:"password",useStateIcon:!1,placeholder:t.pwdField.placeholder,bind:t.pwdField},model:{value:t.pwdField.value,callback:function(e){t.$set(t.pwdField,"value",e)},expression:"pwdField.value"}})],1)]),a("div",{staticClass:"row-section tips"},[a("h3",[t._v(t._s(t.$t("lineDrawing.Tips")))]),a("ul",{style:{listStyle:"decimal",marginLeft:"20px"}},[a("li",[t._v(t._s(t.$t("lineDrawing.Mention1")))]),a("li",[t._v(t._s(t.$t("lineDrawing.Mention2")))]),t.formData.bankId?t._e():[a("li",[t._v(t._s(t.$t("lineDrawing.Mention3")))]),a("li",[t._v(t._s(t.$t("lineDrawing.Mention4")))])]],2)]),a("div",{staticClass:"row-section tips"},[a("LinearButton",{attrs:{type:"submit"}},[t._v(t._s(t.$t("lineDrawing.Submit")))]),a("LinearButton",{style:{marginTop:"10px"},on:{click:function(e){return t.$router.push({path:"/transactionRecord",query:{acti:2,redirect:t.$router.currentRoute.fullPath}})}}},[t._v(t._s(t.$t("lineDrawing.CheckRecrod")))])],1)]),a("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect,cancel:function(e){t.isAccountSheetShow=!1}},model:{value:t.isAccountSheetShow,callback:function(e){t.isAccountSheetShow=e},expression:"isAccountSheetShow"}}),a("BaseDialog",{staticClass:"dialog-box",attrs:{confirmButtonText:t.$t("lineDrawing.Close"),isShowIcon:"",title:t.$t("lineDrawing.RefreshComplete"),iconName:"success"},on:{close:function(e){t.isShowRefreshDialog=!1},confirm:function(e){t.isShowRefreshDialog=!1}},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"dialog-content"},[a("p",{},[t._v(t._s(t.$t("lineDrawing.YourTakeableAmount")))]),a("p",{},[t._v("$"+t._s(null===t.allBalance?"--":t.$cf.toComma(t.allBalance)))]),a("div",{staticClass:"dialog-tips"},[t._v(t._s(t.$t("lineDrawing.RefreshMention")))])])]},proxy:!0}]),model:{value:t.isShowRefreshDialog,callback:function(e){t.isShowRefreshDialog=e},expression:"isShowRefreshDialog"}})],1)},n=[],s={name:"LineDrawing",data(){return{isAccountSheetShow:!1,actions:[],selectCardAccountType:"",price:"",isShowRefreshDialog:!1,userObj:{},formData:{accountAddress:"",bankName:"",accountId:"",accountNumber:"",bankId:""},drawingLimit:{},amountField:{name:"amount",value:"",label:this.$t("lineDrawing.WithdrawalAmount"),rules:[{required:!0,message:this.$t("lineDrawing.WithdrawalAmountWarning")},{validator:(t,e)=>t<this.drawingLimit.onceWithdrawLowerLimit?(e.message=this.$t("lineDrawing.MinWithdrawalAmount",[this.drawingLimit.onceWithdrawLowerLimit]),!1):!(t>this.drawingLimit.onceWithdrawUpperLimit)||(e.message=this.$t("lineDrawing.MaxWithdrawalAmount",[this.drawingLimit.onceWithdrawUpperLimit]),!1)}]},pwdField:{name:"password",value:"",label:this.$t("lineDrawing.WithdrawalPwd"),placeholder:this.$t("lineDrawing.WithdrawalPwdWarning"),rules:[{required:!0,message:this.$t("lineDrawing.WithdrawalPwdWarning")}]},WITHDRAW:{DISABLED:0}}},computed:{allBalance(){return this.$store.state.allBalance||Number(localStorage.getItem("allBalance"))},accountNumberDisplay(){return this.formData.accountNumber.toString()},USDTAmount(){return this.amountField.value?(Number(this.amountField.value)/Number(this.price)).toFixed(2):0}},watch:{selectCardAccountType:{handler(t){4===t&&this.getUsdtPrice()}}},async created(){await this.transferBack(),this.init(),this.getPerInfo()},methods:{goBack(){this.$cf.goBack(this.$route)},init(){this.$api.cardList.getPlayerDrawingLimit({body:{}},t=>{const e=t.data;e.onceWithdrawLowerLimit/=100,e.onceWithdrawUpperLimit/=100,this.drawingLimit=e}),this.$api.cardList.getAccoutList({body:{}},t=>{t.data.list.forEach(t=>{t.name=t.bankName||"USDT",t.subname=`( ${t.accountNumber} )`}),this.actions=t.data.list,this.onSelect(this.actions.find(t=>1===t.mainCard))})},onRefreshAccount(){this.isShowRefreshDialog=!0},getPerInfo(){this.$api.my.getPerInfo({body:{}},t=>{this.userObj=t.data})},onSubmit(){if(this.userObj.withdrawState===this.WITHDRAW.DISABLED)return void this.$cf.showErrorMessageDialog(this.$t("lineDrawing.CannotWithdrawalMsg"));if(!this.checkBalance())return;const t={accountAddress:this.formData.accountAddress,accountId:this.formData.accountId,accountNumber:this.formData.accountNumber,bankId:this.formData.bankId,money:100*+this.amountField.value,withdrawPassword:this.pwdField.value};this.formData.bankId||(t.thirdPartyMoney=JSON.stringify({USDT:(100*Number(this.USDTAmount)).toFixed(0)})),this.$api.wallet.subApply({body:t},()=>{this.$cf.showSuccessMessageDialog(this.$t("lineDrawing.SendOrdersComplete")),setTimeout(()=>{this.$router.push({path:"/transactionRecord",query:{acti:2,redirect:this.$router.currentRoute.fullPath}})},1500)},t=>{this.$cf.showErrorMessageDialog(t.message)})},getAllBalance(t){this.$store.dispatch("getAllBalance",{vm:this,callback:t||void 0})},checkBalance(){const t=Number(this.amountField.value),e=this.allBalance/100;return!(t>e)||(this.$cf.showConfirmDialog({message:this.$t("lineDrawing.CheckBalanceMsg",[this.$cf.toComma(e)])}),!1)},onSelect(t){t&&(this.formData.accountNumber=t.accountNumber||"",this.formData.bankId=t.bankId||null,this.formData.accountId=t.id||"",this.formData.accountAddress=t.accountAddress||"",this.formData.bankName=t.bankName||"USDT",this.selectCardAccountType=t.accountType||""),this.isAccountSheetShow=!1},getUsdtPrice(){this.$api.wallet.getUsdtPrice({},t=>{this.price=t.data.price})},transferBack(){return new Promise(t=>{this.$api.wallet.transferBack({},t)})},omitInfo(t){if(void 0!==t){if(t.length>=32){const e=t.substring(0,31);return e+" ..."}return t}return"--"}},components:{TransparentFieldInput:()=>Promise.resolve().then(a.bind(null,"6feb")),LinearButton:()=>a.e("chunk-73bcffce").then(a.bind(null,"ec6b")),BalanceButton:()=>a.e("chunk-6236a682").then(a.bind(null,"2c30"))}},r=s,o=(a("f0af"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,null,null);e["default"]=l.exports},f0af:function(t,e,a){"use strict";var i=a("31a5"),n=a.n(i);n.a}}]);