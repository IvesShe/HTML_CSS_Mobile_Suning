(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Recharge"],{"091a":function(e,t,n){e.exports=n.p+"img/qrcode-1.0e7124f3.png"},"2cb3":function(e,t,n){"use strict";var a=n("329b"),o=n.n(a);o.a},"2cca":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recharge-tutorial-container"},[a("TheHeader",{attrs:{"left-arrow":"",title:e.$t("recharge.RechargeTutoral"),"left-click":e.goBack}}),a("div",{staticClass:"row-section"},[a("BaseSelector",{staticClass:"tutorial-selector",attrs:{columns:e.tutorials,value:e.activeTutorial.value,valueKey:"value",presentKey:"label"},on:{confirm:e.onSelectTutorial}}),a("div",{staticClass:"progress-text"},[a("h3",[e._v(e._s(e.$t("recharge.Step")))]),a("h3",[a("span",{staticClass:"progress-text__highlight"},[e._v(e._s(e.activeIndex))]),e._v(" /"+e._s(e.steps)+" ")])]),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-bar-active",style:"width: "+e.activeIndex/e.steps*100+"%"})])],1),a("div",{staticClass:"img-container"},[e._l(e.steps,(function(t){return a("img",{key:t+"-"+e.activeTutorial.value,ref:e.activeTutorial.value,refInFor:!0,attrs:{src:e.getImage(t)}})})),a("img",{staticClass:"img-container__icon",attrs:{src:n("9a64"),alt:""},on:{click:e.scrollToTop}})],2)],1)},o=[],i=n("4795"),r=n.n(i);function s(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){s(i,a,o,r,c,"next",e)}function c(e){s(i,a,o,r,c,"throw",e)}r(void 0)}))}}var l={name:"Tutorial",data:function(){var e=this;return{activeTutorial:{label:function(){return e.$t("recharge.QRcode")},value:"qrcode"},tutorials:[{label:function(){return e.$t("recharge.QRcode")},value:"qrcode"},{label:function(){return e.$t("recharge.TransferTutorial")},value:"transfer"}],steps:6,activeIndex:1,observer:null}},mounted:function(){this.setObserver("qrcode")},methods:{setObserver:function(e){var t=this;return c(r.a.mark((function n(){var a;return r.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.$refs[e],n.next=3,new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var n=a.findIndex((function(t){return t.src===e.target.src}));t.activeIndex=n+1}}))}),{threshold:.6});case 3:t.observer=n.sent,a.forEach((function(e){return t.observer.observe(e)})),t.$once("hook:beforeDestroy",(function(){a.forEach((function(e){return t.observer.unobserve(e)}))}));case 6:case"end":return n.stop()}}),n)})))()},getImage:function(e){try{return n("aac1")("./".concat(this.activeTutorial.value,"-").concat(e,".png"))}catch(t){return""}},goBack:function(){this.$router.go(-1)},onSelectTutorial:function(e){var t=this;this.steps="qrcode"===e.value?6:5,this.activeTutorial=e,this.$nextTick(c(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setObserver(t.activeTutorial.value);case 2:setTimeout((function(){t.activeIndex=1}),0);case 3:case"end":return e.stop()}}),e)}))))},scrollToTop:function(){var e=this.$refs[this.activeTutorial.value];e&&e[0].scrollIntoView({behavior:"smooth"})}}},u=l,f=(n("3c9d"),n("2877")),h=Object(f["a"])(u,a,o,!1,null,null,null);t["default"]=h.exports},"329b":function(e,t,n){},3625:function(e,t,n){e.exports=n.p+"img/transfer-3.a6a8509a.png"},"3c9d":function(e,t,n){"use strict";var a=n("b54e"),o=n.n(a);o.a},"42da":function(e,t,n){e.exports=n.p+"img/qrcode-6.74138ef1.png"},4518:function(e,t,n){e.exports=n.p+"img/transfer-4.73debe71.png"},"5a2c":function(e,t,n){e.exports=n.p+"img/transfer-1.c2822a75.png"},"69fd":function(e,t,n){e.exports=n.p+"img/qrcode-3.88e3c50b.png"},"75e0":function(e,t,n){e.exports=n.p+"img/transfer-5.e06c6c08.png"},"7e00":function(e,t,n){e.exports=n.p+"img/qrcode-5.568b3e36.png"},"9a64":function(e,t,n){e.exports=n.p+"img/icon-totop.f9bec70f.svg"},a148:function(e,t,n){e.exports=n.p+"img/transfer-2.fd25a022.png"},a424:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recharge-container"},[n("TheHeader",{attrs:{"left-arrow":"",title:e.$t("recharge.Recharge"),"left-click":e.goBack,isFixedTop:!0}}),n("div",{staticClass:"tutorial",on:{click:function(t){return e.$router.push({path:"/tutorial"})}}},[n("span",[e._v(e._s(e.$t("recharge.Tutorial")))]),n("i",{staticClass:"tutorial__icon"})]),n("div",{staticClass:"row-section"},[n("p",[e._v("1. "+e._s(e.$t("recharge.DepositWay")))]),n("div",{staticClass:"payment-method-wrapper"},e._l(e.paymentMethods,(function(t){return n("BaseButton",{key:t.type,staticClass:"payment-method-btn",class:{active:e.activeMethod.type===t.type},on:{click:function(n){return e.changeMethod(t)}}},[n("div",{class:"icon icon-"+t.type}),e._v(" "+e._s(t.typeName)+" ")])})),1)]),n("div",{staticClass:"row-section"},[n("p",[e._v("2. "+e._s(e.$t("recharge.DepositLine")))]),n("div",{staticClass:"payment-channel-wrapper"},e._l(e.activeMethod.list,(function(t){return n("BaseButton",{key:t.id,staticClass:"payment-channel-btn",class:{active:e.activeChannel.id===t.id},on:{click:function(n){return e.changeChannel(t)}}},[e._v(e._s(t.name))])})),1)]),n("div",{staticClass:"row-section"},[n("p",[e._v("3. "+e._s(e.$t("recharge.Concessionary")))]),n("div",{staticClass:"payment-discount-wrapper",on:{click:function(t){e.showPromotion=!0}}},[n("span",{staticClass:"text"},[e._v(e._s(e.activePromotion.name))]),n("div",[n("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow-down"}})],1)])]),n("van-action-sheet",{attrs:{actions:e.promotions,"cancel-text":"取消"},on:{open:function(t){return e.getPromotionList()},select:e.onSelectPromotion,cancel:function(t){e.showPromotion=!1}},model:{value:e.showPromotion,callback:function(t){e.showPromotion=t},expression:"showPromotion"}}),n("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:e.onSubmit}},[n("div",{staticClass:"row-section"},[n("p",[e._v("4. "+e._s(e.$t("recharge.RechargeAmount")))]),n("div",{staticClass:"payment-amount-wrapper"},[0===e.fixMoneyArray.length?n("TransparentFieldInput",{attrs:{bind:e.amountField,useStateIcon:!1,placeholder:e.amountPlaceHolder},model:{value:e.amountField.value,callback:function(t){e.$set(e.amountField,"value",t)},expression:"amountField.value"}}):n("div",{staticClass:"fix-amount-box"},e._l(e.fixMoneyArray,(function(t,a){return n("BaseButton",{key:t+a,staticClass:"fix-amount-btn",class:{"btn-active":t+a===e.activeFixMoneyBtnKey},attrs:{type:"button"},on:{click:function(n){return e.onClickFixBtn(t,t+a)}}},[e._v(e._s(t/100))])})),1),8===e.activeMethod.type?[n("div",{staticClass:"usdt-tip"},[e._v(" 1USDT = "),n("span",[e._v(e._s(e.price))]),e._v(" THB ")]),n("div",{staticClass:"usdt-tip"},[e._v(" "+e._s(e.$t("recharge.usdtTip1"))+" "),n("span",[e._v(e._s(e.usdt))]),e._v(" "+e._s(e.$t("recharge.usdtTip2"))+" ")])]:e._e()],2)]),n("div",{staticClass:"row-section tips"},[n("h3",[e._v(e._s(e.$t("recharge.Reminder")))]),n("ul",{style:{listStyle:"decimal",marginLeft:"20px"}},[n("li",[e._v(e._s(e.$t("capitalAcc.FinanceWarning1")))])])]),n("div",{staticClass:"row-section tips"},[n("LinearButton",{attrs:{type:"submit"}},[e._v(e._s(e.$t("recharge.SubmitRecharge")))]),n("LinearButton",{style:{marginTop:"10px"},on:{click:function(t){return e.$router.push({path:"/transactionRecord",query:{acti:0,redirect:e.$router.currentRoute.fullPath}})}}},[e._v(e._s(e.$t("recharge.ViewTopRecord")))])],1)]),n("BaseDialog",{attrs:{confirmButtonText:e.$t("recharge.PaymentCompleted")},on:{confirm:function(t){return e.onDialogConfirm("transferDialog")},cancel:function(t){return e.onCancel("transferDialog")},close:function(t){return e.onDialogClose("transferDialog")}},scopedSlots:e._u([{key:"content",fn:function(){return[n("TransferContent",{attrs:{info:e.transferInfo},on:{"update:info":function(t){e.transferInfo=t}}})]},proxy:!0}]),model:{value:e.isTransferDialogShow,callback:function(t){e.isTransferDialogShow=t},expression:"isTransferDialogShow"}}),n("BaseDialog",{attrs:{cancelButtonText:e.$t("recharge.CancelPayment"),confirmButtonText:e.$t("recharge.ConfirmPayment"),"show-cancel-button":""},on:{confirm:function(t){return e.onDialogConfirm("confirmDialog")},cancel:function(t){return e.onCancel("confirmDialog")},close:function(t){return e.onDialogClose("confirmDialog")}},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"online-pay-dialog-content"},[n("h3",{staticClass:"title"},[e._v(e._s(e.payInfo.paymentName))]),n("p",{staticClass:"amount"},[e._v(e._s(e.amountField.value))]),n("p",{staticClass:"tips"},[e._v(e._s(e.$t("recharge.PaymentTip",{time:e.payInfo.completeTimeTips})))]),n("div",{staticClass:"payment-wrapper"},[n("BaseCell",{scopedSlots:e._u([{key:"left",fn:function(){return[e._v(e._s(e.$t("recharge.DepositTime")))]},proxy:!0},{key:"middle",fn:function(){return[e._v(e._s((new Date).toLocaleString()))]},proxy:!0}])}),n("BaseCell",{scopedSlots:e._u([{key:"left",fn:function(){return[e._v(e._s(e.$t("recharge.DepositSeris")))]},proxy:!0},{key:"middle",fn:function(){return[n("span",{staticClass:"number"},[e._v(e._s(e.payInfo.tradeNo))])]},proxy:!0}])}),n("BaseCell",{scopedSlots:e._u([{key:"left",fn:function(){return[e._v(e._s(e.$t("recharge.Concessionary")))]},proxy:!0},{key:"middle",fn:function(){return[e._v(e._s(e.activePromotion.name))]},proxy:!0}])}),n("BaseCell",{scopedSlots:e._u([{key:"left",fn:function(){return[e._v(e._s(e.$t("recharge.DepositWay")))]},proxy:!0},{key:"middle",fn:function(){return[e._v(e._s(e.activeMethod.typeName))]},proxy:!0}])})],1)])]},proxy:!0}]),model:{value:e.isOnlinePayConfirmDialogShow,callback:function(t){e.isOnlinePayConfirmDialogShow=t},expression:"isOnlinePayConfirmDialogShow"}})],1)},o=[],i={name:"Recharge",data:function(){var e=this;return{showPromotion:!1,activeMethod:{},activeChannel:{},activePromotion:{id:"",name:this.$t("recharge.DiscountNoUse")},activeFixMoneyBtnKey:void 0,paymentMethods:[],promotions:[],payInfo:{},transferInfo:{},isOnlinePayConfirmDialogShow:!1,isTransferDialogShow:!1,price:0,amountField:{name:"amount",value:"",rules:[{required:!0,message:this.$t("recharge.RechargeAmountPlaceholder")},{validator:function(t,n){return/(^\d*$)|(^\d*.\d{1,2}$)/.test(t)?0!==e.activeChannel.depositPerMax||0!==e.activeChannel.depositPerMin?t<e.amountLowerBound?(n.message=e.$t("recharge.RechargeLimitUpperBoundWarning",[e.amountLowerBound]),!1):!(t>e.amountUpperBound)||(n.message=e.$t("recharge.RechargeLimitLowerBoundWarning",[e.amountUpperBound]),!1):t>0:(n.message=e.$t("recharge.RechargeAmountWarning",[e.amountUpperBound]),!1)}}]}}},watch:{activeMethod:function(e){var t=this;8===e.type&&this.$api.wallet.getUsdtPrice({},(function(e){t.price=e.data.price}))}},computed:{amountUpperBound:function(){return this.activeChannel.depositPerMax/100||0},amountLowerBound:function(){return this.activeChannel.depositPerMin/100||0},amountPlaceHolder:function(){return 0===this.amountLowerBound&&0===this.amountUpperBound?this.$t("recharge.RechargeAmountPlaceholder"):"".concat(this.amountLowerBound," ~ ").concat(this.amountUpperBound)},bankCardInfo:function(){return this.activeChannel.id?JSON.parse(this.activeChannel.merchantInfo):{}},fixMoneyArray:function(){if(this.activeChannel.fixMoney){var e=this.activeChannel.fixMoney.split(",")||[];return e.map((function(e){return(+e/100).toFixed(2)})),e}return[]},usdt:function(){return this.price?(Number(this.amountField.value)/this.price).toFixed(2):0}},created:function(){var e=this;this.getPaymentMethod().then((function(){e.changeMethod(e.paymentMethods[0]),e.getPromotionList()}))},methods:{onSelectPromotion:function(e){this.showPromotion=!1,this.activePromotion=e},onSubmit:function(){var e=this;this.activePromotion.id?this.$api.wallet.qualificationVerify({body:{activityModelId:this.activePromotion.id,memberId:localStorage.getItem("memberId"),type:this.activeChannel.type,online:this.activeChannel.online}},(function(){e.doRecharge()})):this.doRecharge()},onClickFixBtn:function(e,t){this.amountField.value=e/100,this.activeFixMoneyBtnKey=t},doRecharge:function(){var e=this;if(1===this.activeChannel.online){var t={activityId:this.activePromotion.id,money:100*+this.amountField.value,paymentId:this.activeChannel.id};8===this.activeMethod.type&&(t.extend={thirdpartyMoney:parseFloat(parseFloat(100*Number(this.usdt)).toFixed(2))}),this.$api.wallet.UPmoney({body:t},(function(t){e.payInfo=t.data,e.payInfo.completeTimeTips=e.activeChannel.completeTimeTips,e.isOnlinePayConfirmDialogShow=!0,e.amountField.value<=1e3?window.gtag("event","充值"):window.gtag("event","充值>1000")}))}else this.transferInfo={channelName:this.activeChannel.name,amount:this.amountField.value,paymentMethod:this.activeMethod.typeName,promotionName:this.activePromotion.name,payBankName:this.bankCardInfo.payBankName,payAccount:this.bankCardInfo.payAccount,payRealname:this.bankCardInfo.payRealname,channelType:this.activeChannel.type,completeTimeTips:this.activeChannel.completeTimeTips,transferAccountName:"",transferAccountNumber:""},this.isTransferDialogShow=!0},onDialogClose:function(e){"transferDialog"===e?this.isTransferDialogShow=!1:"confirmDialog"===e&&(this.isOnlinePayConfirmDialogShow=!1)},onDialogConfirm:function(e){var t=this;if("transferDialog"===e){if(!this.transferInfo.transferAccountNumber||!this.transferInfo.transferAccountName)return void this.$cf.toast(this.$t("recharge.RechargeInfoNoCompleteWarning"));var n={activityId:this.activePromotion.id,money:100*this.amountField.value,paymentId:this.activeChannel.id,extend:{account:this.transferInfo.transferAccountNumber,method:"银行卡",realname:this.transferInfo.transferAccountName}};this.$api.wallet.UPmoney({body:n},(function(){t.$cf.showConfirmSuccessDialog({message:t.$t("recharge.PaymentSuccessfulFeedback"),onConfirm:function(){t.$router.push({path:"/transactionRecord",query:{acti:0,redirect:t.$router.currentRoute.fullPath}}),t.amountField.value<=1e3?window.gtag("event","充值"):window.gtag("event","充值>1000")}})}))}else"confirmDialog"===e&&this.createUrl(this.payInfo.tradeNo)},onCancel:function(e){var t=this;this.$store.commit("setDialog",{message:'\n        <div class="role-wrap">\n          '.concat(this.$t("recharge.cancelTip"),"\n        </div>\n        "),confirmText:this.$t("yes"),cancelText:this.$t("no"),isShowCancelBtn:!0,onConfirm:function(){return t.onDialogCancel(e)},onCancel:function(){}})},onDialogCancel:function(e){var t=this;"transferDialog"===e?this.onDialogClose(e):"confirmDialog"===e&&(this.$api.wallet.UPcancel({body:{id:this.payInfo.id}},(function(){t.$cf.showSuccessMessageDialog(t.$t("recharge.CancelPaymentFeedback"))})),this.onDialogClose(e))},goBack:function(){this.$cf.goBack(this.$route)},changeMethod:function(e){this.activeMethod=e,this.changeChannel(e.list[0])},changeChannel:function(e){this.activeChannel=e,this.amountField.value=""},getPromotionList:function(){var e=this;this.$api.wallet.getyouhuiList({body:{status:1},pageBean:{page:1,pageSize:4}},(function(t){if(t.data.push({name:e.$t("recharge.DiscountNoUse"),id:"",lineTypeResponse:[]}),null!==e.activeChannel&&t.data.length>1){var n=e.activeChannel,a=n.type,o=n.online;e.promotions=t.data.filter((function(e){return 0===e.lineTypeResponse.length||e.lineTypeResponse.some((function(e){return e.type===a&&e.online===o}))}))}}))},getPaymentMethod:function(){var e=this;return new Promise((function(t){e.$api.wallet.getZfLine({body:{}},(function(n){var a;e.paymentMethods=(null===(a=n.data)||void 0===a?void 0:a.list)||[],t()}))}))},createUrl:function(e){var t=this;this.$api.wallet.createUrl({body:{tradeNo:e}},(function(e){window.location.replace(e.data.payUrl),t.$cf.showConfirmCancelDialog({message:t.$t("recharge.GoPayCheckFeedback"),onConfirm:function(){t.$cf.showSuccessMessageDialog(t.$t("recharge.PaymentSuccessfulFeedback")),setTimeout((function(){t.$router.push({path:"/transactionRecord",query:{acti:0,redirect:t.$router.currentRoute.fullPath}})}),1500),t.amountField.value<=1e3?window.gtag("event","充值"):window.gtag("event","充值>1000")}})}),(function(){}))}},components:{LinearButton:function(){return n.e("chunk-73bcffce").then(n.bind(null,"ec6b"))},TransferContent:function(){return n.e("chunk-74d188aa").then(n.bind(null,"4908"))}}},r=i,s=(n("2cb3"),n("2877")),c=Object(s["a"])(r,a,o,!1,null,null,null);t["default"]=c.exports},aac1:function(e,t,n){var a={"./qrcode-1.png":"091a","./qrcode-2.png":"fb7b","./qrcode-3.png":"69fd","./qrcode-4.png":"eb95","./qrcode-5.png":"7e00","./qrcode-6.png":"42da","./transfer-1.png":"5a2c","./transfer-2.png":"a148","./transfer-3.png":"3625","./transfer-4.png":"4518","./transfer-5.png":"75e0"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="aac1"},b54e:function(e,t,n){},eb95:function(e,t,n){e.exports=n.p+"img/qrcode-4.badba066.png"},fb7b:function(e,t,n){e.exports=n.p+"img/qrcode-2.3763a8d4.png"}}]);