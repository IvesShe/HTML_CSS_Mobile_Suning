(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CardList"],{"1a69":function(t,i,e){"use strict";var a=e("c108"),s=e.n(a);s.a},"6df0":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"card-list-container"},[e("TheHeader",{attrs:{title:t.$t("cardList.BankCard"),"left-arrow":"","left-click":t.goBack,isFixedTop:!0}}),t.isEditing?t._e():e("div",{staticClass:"center_align"},[t.isShowAdd?e("BaseButton",{staticClass:"card-btn",on:{click:function(i){return t.$router.push({path:"/bankCard"})}}},[t._v(t._s(t.$t("cardList.NewCard")))]):t._e(),t.cardList.length>0?e("BaseButton",{staticClass:"card-btn",on:{click:t.onEdit}},[t._v(t._s(t.$t("cardList.Edit")))]):t._e()],1),e("div",{staticClass:"card-list-box"},t._l(t.cardList,(function(i){return e("BankCard",{key:i.id,attrs:{item:i,"is-editing":t.isEditing,"is-main-card":t.getIsMainCard(i)},on:{delete:t.confirmDel,select:t.onMainCardSelect}})})),1),t.isEditing?e("div",{staticClass:"center_align"},[t.isShowAdd?e("BaseButton",{staticClass:"card-btn",on:{click:t.onSave}},[t._v(t._s(t.$t("cardList.Save")))]):t._e(),t.cardList.length>0?e("BaseButton",{staticClass:"card-btn",on:{click:t.onCancel}},[t._v(t._s(t.$t("cardList.Cancel")))]):t._e()],1):t._e(),e("BaseDialog",{attrs:{"show-confirm-button":!1},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"role-wrap"},[e("div",{staticClass:"icon"},[e("i",{staticClass:"ic36-game4"})]),e("p",{staticClass:"dialog-title"},[t._v(t._s(t.$t("cardList.RemoveCardSuccess")))]),e("hr"),e("p",{staticClass:"bank-name2"},[t._v(t._s(4===t.deletingItem.accountType?t.deletingItem.accountAddress:t.deletingItem.bankName))]),e("p",[t._v(t._s(t.deletingItem.accountNumber))])])]},proxy:!0}]),model:{value:t.showResultDialog,callback:function(i){t.showResultDialog=i},expression:"showResultDialog"}})],1)},s=[],n=e("a79b");const d={id:"",bankName:"",accountNumber:""};var c={name:"CardList",data(){return{cardList:[],isShowAdd:!1,realName:"",isEditing:!1,showConfirmDialog:!1,showResultDialog:!1,deletingItem:d,mainCardItem:d,cachedMainCardItem:d}},created(){this.init()},methods:{init(){this.$api.my.getPerInfo({body:{}},t=>{this.realName=t.data.realname}),this.$api.cardList.getAccoutList({body:{}},t=>{var i;this.cardList=(null===(i=t.data)||void 0===i?void 0:i.list)||[],this.mainCardItem=this.cardList.find(t=>1===t.mainCard)||d,this.cachedMainCardItem=this.mainCardItem,this.$api.cardList.getPlayerDrawingLimit({body:{}},t=>{this.isShowAdd=this.cardList.length<t.data.onceWithdrawAccountCountUpperLimit})})},onSave(){this.mainCardItem.id?this.$api.cardList.editWithdrawAccount({body:{id:this.mainCardItem.id}},()=>{this.$cf.showSuccessMessageDialog(this.$t("cardList.SetMainCardSuccess")),this.cachedMainCardItem=this.mainCardItem,Object(n["e"])(3e3).then(()=>{this.isEditing=!1}),this.init()}):this.$cf.showErrorMessageDialog(this.$t("cardList.ChooseOneCard"))},onMainCardSelect(t){this.mainCardItem=t},getIsMainCard(t){return this.mainCardItem.id===t.id},onEdit(){this.isEditing=!0},onCancel(){this.mainCardItem=this.cachedMainCardItem,this.isEditing=!1},confirmDel(t){this.deletingItem=t,this.$store.commit("setDialog",{title:this.$t("bankCardEdit.RemoveTheBankCard"),message:`\n        <div class="role-wrap">\n          <hr />\n          <p class="bank-name" style="word-break: break-all;">${this.deletingItem.accountNumber}</p>\n          <p>${4===this.deletingItem.accountType?this.deletingItem.accountAddress:this.deletingItem.bankName}</p>\n          <p class="tip">${this.$t("cardList.RemoveCardMsg")}</p>\n        </div>\n        `,iconName:"error",confirmText:this.$t("Confirm"),cancelText:this.$t("Cancel"),onConfirm:this.onRemove,onCancel:this.closeDialog})},onRemove(){this.$api.cardList.deleteWithdrawAccount({body:{id:this.deletingItem.id}},()=>{this.showResultDialog=!0,Object(n["e"])(2e3).then(()=>{this.showResultDialog=!1,Object(n["e"])(1e3).then(()=>{this.deletingItem=d}),this.init(),this.isEditing=!1})})},closeDialog(){this.isShowDialog=!1,this.deletingItem=d},goBack(){this.$cf.goBack(this.$route)}},components:{TheHeader:()=>Promise.resolve().then(e.bind(null,"2ab4")),BankCard:()=>e.e("chunk-7b06bee5").then(e.bind(null,"18e2"))}},r=c,o=(e("1a69"),e("2877")),l=Object(o["a"])(r,a,s,!1,null,"3e1a19d6",null);i["default"]=l.exports},c108:function(t,i,e){}}]);