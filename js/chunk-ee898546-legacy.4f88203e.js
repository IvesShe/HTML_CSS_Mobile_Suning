(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee898546"],{"2f6d":function(e,t,a){},"3b07":function(e,t,a){e.exports=a.p+"img/icon-changePic.93829a0f.svg"},"9c80":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-uploader",{staticClass:"avatar-upload-container",attrs:{"after-read":e.onRead,"before-read":e.onBefore,"max-size":"3145728",disabled:e.disabled},on:{oversize:e.oversize}},[e.userAvatar?r("img",{staticClass:"avatar__img",class:e.imgClass,attrs:{src:e.userAvatar,alt:""}}):e._e(),e.disabled?e._e():r("img",{staticClass:"avatar__picture",attrs:{src:a("3b07"),alt:""}})])},n=[];function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={name:"AvatarUpload",props:{avatar:String,imgClass:String,disabled:{type:Boolean,default:!1}},computed:{userAvatar:{get:function(){return this.avatar},set:function(e){this.$emit("update:avatar",e),this.$store.commit("setUserInfo",s(s({},this.$store.state.userInfo),{},{avatar:e}))}}},created:function(){var e=this;this.userAvatar||this.getDefaultHeadimg().then((function(t){e.userAvatar=t})).catch((function(){e.userAvatar=""}))},methods:{onRead:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$api.my.uploadImg(a).then((function(e){t.userAvatar=e.data.data,t.$api.my.Upper({body:{avatar:e.data.data}},(function(){t.$cf.showSuccessMessageDialog(t.$t("perSettings.UploadPicturesSuccessfully"))}))}),(function(){t.$cf.showErrorMessageDialog(t.$t("perSettings.FailedToUploadImages"))}))},oversize:function(){this.$cf.showErrorMessageDialog(this.$t("perSettings.Tip1"))},onBefore:function(e,t){return-1===e.type.indexOf("jpg")&&-1===e.type.indexOf("jpeg")&&-1===e.type.indexOf("png")?(this.$cf.showErrorMessageDialog(this.$t("perSettings.Tip2")),!1):t},getDefaultHeadimg:function(){var e=this;return new Promise((function(t,a){e.$api.my.getDefaultHeadimg({},(function(e){e.data.defaultHeadimg?t(e.data.defaultHeadimg):a()}))}))}}},u=c,f=(a("d9c5"),a("2877")),p=Object(f["a"])(u,r,n,!1,null,"8f8c6994",null);t["default"]=p.exports},d9c5:function(e,t,a){"use strict";var r=a("2f6d"),n=a.n(r);n.a}}]);