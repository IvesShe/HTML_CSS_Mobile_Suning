(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["proceCode"],{"37dd":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"proce-code-container"},[i("TheHeader",{staticClass:"transparent",attrs:{title:e.headerTitle,"left-arrow":""},on:{"click-left":function(t){return e.goBack()}}}),i("div",{staticClass:"form-box"},[i("div",{staticClass:"form-title"},[e._v(e._s(e.formTitle))]),"wechat"===e.type?i("p",{staticClass:"tips"},[e._v(e._s(e.$t("proceCode.Tip3")))]):e._e(),i("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:e.sendCode}},["wechat"!==e.type?i("TransparentFieldInput",{attrs:{maxlength:e.formFields[0].maxlength,placeholder:e.formFields[0].placeholder,validatedState:e.formFields[0].validatedState,usePrefixIcon:e.formFields[0].usePrefixIcon,usePrefixText:e.formFields[0].usePrefixText,prefixIconClass:e.formFields[0].prefixIconClass,bind:e.formFields[0],inputClass:"mobile"===e.type?"nation-code-input":""},on:{blur:function(t){e.formFields[0].blur&&e.field.blur(e.formFields[0])}},scopedSlots:e._u(["mobile"===e.type?{key:"before-input",fn:function(){return[i("div",{staticClass:"nation-code-wrap"},[i("BaseSelector",{attrs:{columns:e.nationCodes,value:e.nationCode,presentKey:"label",valueKey:"value",containerClass:"nation-code-select-wrap"},on:{confirm:e.onNCSelect}})],1)]},proxy:!0}:null],null,!0),model:{value:e.formFields[0].value,callback:function(t){e.$set(e.formFields[0],"value",t)},expression:"formFields[0].value"}}):e._e()],1),i("van-form",{attrs:{"validate-trigger":"onChange"},on:{submit:e.onSubmit}},[i("TransparentFieldInput",{attrs:{maxlength:e.formFields[1].maxlength,placeholder:e.formFields[1].placeholder,validatedState:e.formFields[1].validatedState,usePrefixIcon:e.formFields[1].usePrefixIcon,prefixIconClass:e.formFields[1].prefixIconClass,bind:e.formFields[1]},on:{blur:function(t){e.formFields[1].blur&&e.field.blur(e.formFields[1])}},scopedSlots:e._u([{key:"right",fn:function(){return[i("button",{staticClass:"code-btn",attrs:{type:"button",round:"",disabled:!e.flag},on:{click:e.sendCode}},[e._v(e._s(e.buttonText))])]},proxy:!0}]),model:{value:e.formFields[1].value,callback:function(t){e.$set(e.formFields[1],"value",t)},expression:"formFields[1].value"}}),i("div",{staticClass:"van-cell"},[i("van-button",{staticClass:"submit-btn",attrs:{type:"submit"}},[e._v(e._s(e.$t("Confirm")))])],1)],1)],1)],1)},s=[],a=i("f2dc"),n=i("655c"),r=i("a79b"),l=i("8cae"),c={name:"ProceCode",mixins:[l["a"]],data(){return{formFields:[],headerTitle:"",formTitle:"",buttonText:this.$t("proceCode.SendVerificationCode"),type:"",count:60,flag:!0,timer:"",notAllowPhoneNumber:""}},computed:{phoneNumber(){return this.getPhoneNumWithNationCode({nationCode:this.nationCode,phone:this.formFields[0].value})}},methods:{onNCSelect(e){this.nationCode=e.value,this.formFields[0].value&&this.$refs.formRef.validate("mobile")},setData(){this.type=this.$route.query.type,"email"===this.type?(this.headerTitle=this.$t("proceCode.EmailCertification"),this.formTitle=this.$t("proceCode.EmailCertification"),this.formFields=[{name:"email",value:"",maxlength:100,placeholder:this.$t("proceCode.ValidateMsgEmail"),usePrefixIcon:!0,prefixIconClass:"ic-mail",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgEmail")},{message:this.$t("proceCode.ValidateFormatMsgEmail"),validator:e=>{if(e)return a["a"].email(e).flag}}]},{name:"emailCode",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgAuth"),usePrefixIcon:!0,prefixIconClass:"ic-guard",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgAuth")}]}]):"mobile"===this.type?(this.$api.register.phoneFormatVerify({},e=>{this.notAllowPhoneNumber=e.data.regTelNotAllow.split(",").join("|")}),this.headerTitle=this.$t("proceCode.CertifiedMobilePhone"),this.formTitle=this.$t("proceCode.CertifiedMobilePhone"),this.formFields=[{name:"mobile",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgPhone"),usePrefixIcon:!0,prefixIconClass:"ic-phone",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgPhone")},{message:this.$t("proceCode.PhoneValidationWarning"),validator:e=>{if(e){const t=a["a"].phoneNum(e,this.notAllowPhoneNumber,n["a"].th,this.nationCode);return t.flag}}}]},{name:"mobileCode",value:"",maxlength:10,placeholder:this.$t("proceCode.ValidateMsgAuth"),usePrefixIcon:!0,prefixIconClass:"ic-guard",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgAuth")}]}]):"wechat"===this.type&&(this.headerTitle=this.$t("proceCode.CertifiedWechat"),this.formTitle=this.$t("proceCode.CertifiedWechat"),this.formFields=[{},{name:"wechat",value:"",maxlength:20,placeholder:this.$t("proceCode.ValidateMsgWechat"),usePrefixIcon:!0,prefixIconClass:"ic-wechat",rules:[{required:!0,message:this.$t("proceCode.ValidateMsgWechat")}]}])},getCode(){if(0===this.count)return this.count=60,this.flag=!0,"email"===this.type?this.buttonText=this.$t("proceCode.SendEmailVerification"):"mobile"===this.type&&(this.buttonText=this.$t("proceCode.SendPhoneCode")),void window.clearTimeout(this.timer);this.buttonText=`${this.count}s ${this.$t("proceCode.Resend")}`,this.count--,this.timer=setTimeout(()=>{this.getCode()},1e3)},sendMailCode(){this.$api.my.getEmailCode({body:{recipient:this.formFields[0].value}},()=>{this.flag=!1,this.getCode(),this.$cf.showConfirmSuccessDialog({title:this.$t("proceCode.PopMsg")})})},sendPhoneCode(){this.formFields[0].value=this.formFields[0].value.length>9?this.formFields[0].value.slice(1):this.formFields[0].value,this.$api.register.getAuthCode({body:{recipient:this.phoneNumber}},()=>{this.flag=!1,this.getCode(),this.$cf.showConfirmSuccessDialog({title:this.$t("proceCode.PopMsg2")})})},sendCode(){"email"===this.type?this.sendMailCode():"mobile"===this.type&&this.sendPhoneCode()},onSubmit(){if("email"===this.type)this.$api.my.UpEmailCode({body:{recipient:this.formFields[0].value,code:this.formFields[1].value}},()=>{this.$cf.showConfirmSuccessDialog({title:this.$t("proceCode.CertificationSuccessful"),onConfirm:()=>{this.$router.push("/perSettings")}})},()=>{this.$cf.showErrorMessageDialog(this.$t("proceCode.AuthenticationFailed"))});else if("mobile"===this.type){const e={body:{recipient:this.phoneNumber,code:this.formFields[1].value}};Object(r["c"])()&&(e.body.memberId=localStorage.getItem("memberId")),this.$api.register.mobileAuth(e,()=>{this.$cf.showConfirmSuccessDialog({title:this.$t("proceCode.CertificationSuccessful"),onConfirm:()=>{this.$router.push("/perSettings")}})},()=>{this.$cf.showErrorMessageDialog(this.$t("proceCode.AuthenticationFailed"))})}else"wechat"===this.type&&this.$api.my.memberWechat({body:{wechat:this.formFields[1].value}},()=>{this.$cf.showConfirmSuccessDialog({title:this.$t("proceCode.SubmitCertificationSuccess"),onConfirm:()=>{this.$router.push("/perSettings")}})},()=>{this.$cf.showErrorMessageDialog(this.$t("proceCode.SubmitAuthenticationFailure"))})},goBack(){this.$router.push("/perSettings")}},created(){this.setData()}},u=c,h=(i("fa66"),i("2877")),d=Object(h["a"])(u,o,s,!1,null,null,null);t["default"]=d.exports},"655c":function(e,t,i){"use strict";t["a"]={cn:{phoneNumberLengh:11,ruleName:"phoneNumRuleCN",blackRuleName:"phoneBlackListCN"},th:{phoneNumberLengh:10,ruleName:"phoneNumRuleTH",blackRuleName:"phoneBlackListTH"}}},"8cae":function(e,t,i){"use strict";const{getPhoneNumWithNationCode:o,getNationCodes:s}=i("9ccf");let a;a={},t["a"]={data(){return{nationCode:"66",nationCodes:s()}},methods:{getPhoneNumWithNationCode(e){return o(e)}},components:a}},d787:function(e,t,i){},f2dc:function(e,t,i){"use strict";var o=i("72f2");t["a"]={strnumDa6(e){const t=/^[a-zA-Z0-9]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入6位以上数字或字母"}},passwordValid(e){const t=/^[a-zA-Z0-9_]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式須由 6~16 位半形英数字及下底線组成"}},BDYPasswordValid(e){const t=/^[a-zA-Z0-9]{6,16}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式須由 6~16 位半形英数字"}},BFDrawNumber(e){const t=/^[0-9]{4,8}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，请设定 4~8 位数字密码"}},BDYDrawNumber(e){const t=/^[0-9]{6,}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，请设定 6 位数字密码"}},BFAccount(e){const t=/^BF[a-zA-Z0-9]{4,}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为BF开头且符合 6~14 位"}},EDFAccount(e){const t=/^EDF[a-zA-Z0-9]{4,}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为EDF开头且符合 6~14 位"}},BDYAcount(e){const t=/^[a-zA-Z0-9]{4,12}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号长度必须为 4~12 位半形英数字"}},THAcount(e){const t=/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"账号格式为6-10位英文+数字的組合"}},THAcountLogin(e){const t=/^[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"账号格式为6-10位英文+数字的組合"}},LOAccountLogin(e){const t=/^LE[a-zA-Z0-9]{6,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"帐号格式必须为LE开头且符合 8~12 位"}},THPasswordValid(e){const t=/^[a-zA-Z0-9_]{6,16}$/,i=new RegExp(t);return{flag:i.test(e),text:"密码格式为6-16位英数字及 '_'"}},THRealName(e){const t=/^[a-zA-Z\u4E00-\u9FA5\u0E01-\u0E5B ]{2,128}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},phoneNum(e,t,i,o){let s;if(e){s=i?this[i.ruleName](e,t,o):this.phoneNumRuleCN(e,t,o);const a=i?this[i.blackRuleName](e,t,o):this.phoneBlackListCN(e,t,o);return a.flag||(s=a),s}},phoneNumRuleTH(e){const t=/^\d{9,10}$/,i=new RegExp(t);return{flag:i.test(e),text:"手机号码格式错误"}},phoneNumRuleCN(e){const t=/^1\d{10}$/,i=new RegExp(t);return{flag:i.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码格式错误"}},phoneBlackListCN(e,t,i){t=t||o["a"].state.notAllowPhoneNumber,i=i||o["a"].state.nationCode;let s=i;i||(s=""===i?"86":"66");const a=[];let n=!0;t.split("|").forEach(e=>{const t=e.split("-");t.length<2&&(n=!1),t[0]===s&&a.push(t[1])});const r=n?a.join("|"):t,l=`^(${r}){1,}[0-9]{8,9}$`,c=new RegExp(l);return{flag:!c.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码无法使用，请联系客服"}},phoneBlackListTH(e,t,i){t=t||o["a"].state.notAllowPhoneNumber,i=i||o["a"].state.nationCode;let s=i;i||(s=""===i?"86":"66");const a=[];let n=!0;t.split("|").forEach(e=>{const t=e.split("-");t.length<2&&(n=!1),t[0]===s&&a.push(t[1])});const r=n?a.join("|"):t,l=`^(${r}){1,}[0-9]{6,8}$`,c=new RegExp(l);return{flag:!c.test(e),text:"手机号码无法使用，请联系客服"}},email(e){const t=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的邮箱号码格式"}},yuming(e){const t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\/.?/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的域名格式"}},shenfenz(e){const t=/(^d{15}$)|(^d{17}([0-9]|X)$)/,i=new RegExp(t);return{flag:i.test(e),text:"请输入正确的身份证号码格式"}},number(e){const t=/^[0-9]*$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入数字"}},hanzi(e){const t=/^[\u4e00-\u9fa5·．]{0,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},BDYRealName(e){const t=/^[\u4e00-\u9fa5·．]{2,}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入汉字"}},strnum(e){const t=/^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$/,i=new RegExp(t);return{flag:i.test(e),text:"请输入数字或字母"}},noFullWidth(e){const t=/[\uff00-\uffff]/g,i=new RegExp(t);return{flag:!i.test(e),text:"格式错误，不可包含全形"}},validYoung(e){const t=new Date,i=new Date(e);let o=t.getFullYear()-i.getFullYear();const s=t.getMonth()-i.getMonth();return(s<0||0===s&&t.getDate()<i.getDate())&&(o-=1),{flag:o>=18,text:"未满18岁，无法注册"}},specialCharacters(e){const t=/^[A-Za-z0-9\u4e00-\u9fa5]{1,20}$/,i=new RegExp(t);return{flag:i.test(e),text:"格式错误，限中、英、数字"}}}},fa66:function(e,t,i){"use strict";var o=i("d787"),s=i.n(o);s.a}}]);