(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bankCard"],{3697:function(e,t,a){"use strict";var n=a("a9b3"),r=a.n(n);r.a},4346:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bankcard-container"},[a("TheHeader",{attrs:{title:e.$t("bankCard.NewCard"),"left-arrow":"",leftClick:e.goBack}}),a("BaseCell",{scopedSlots:e._u([{key:"middle",fn:function(){return[e._v(e._s(e.$t("bankCard.AccountName")))]},proxy:!0},{key:"right",fn:function(){return[a("div",{staticClass:"username-ellipsis"},[e._v(e._s(e.omitInfo(e.userName)))])]},proxy:!0}])}),a("div",{staticClass:"van-cell"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("bankCard.accountType")))])]),a("div",{staticClass:"van-cell"},[a("BaseSelector",{attrs:{columns:e.accountTypeList,valueKey:"id",presentKey:"name",value:e.accountType.id},on:{confirm:e.onAccountTypeSelect}})],1),a("van-form",{ref:"formRef",attrs:{"validate-trigger":"onChange"},on:{submit:e.onSubmit}},[a("div",{staticClass:"van-cell"},[a("div",{staticClass:"title"},[e._v(e._s(0===e.accountType.id?e.$t("bankCard.OpenBank"):e.$t("bankCard.chainType")))])]),a("div",{staticClass:"van-cell"},[a("BaseSelector",{attrs:{columns:e.bankList,valueKey:"id",presentKey:"name",value:e.activeBank.id},on:{confirm:e.onSelect}})],1),e._l(e.formFields,(function(t){return a("TransparentFieldInput",{key:t.name,attrs:{maxlength:t.maxlength,validatedState:t.validatedState,placeholder:t.placeholder,bind:t},on:{blur:function(e){t.blur&&t.blur(t)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"field.value"}})})),a("div",{staticClass:"van-cell"},[a("van-checkbox",{model:{value:e.isMainCard,callback:function(t){e.isMainCard=t},expression:"isMainCard"}},[e._v(e._s(e.$t("bankCard.TheMainCardSet")))])],1),a("div",{staticClass:"van-cell"},[a("van-button",{staticClass:"submit-btn",attrs:{type:"submit"}},[e._v(e._s(e.$t("Confirm")))])],1)],2)],1)},r=[],s=a("f2dc");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={name:"BankCard",data(){return{bankList:[],isMainCard:!1,userName:"",activeBank:{},accountType:{id:0,name:()=>this.$t("cardList.BankCard")},accountTypeList:[{id:0,name:()=>this.$t("cardList.BankCard")},{id:1,name:()=>"USDT"}],formFields:[{name:"BankCardNumber",value:"",label:this.$t("bankCard.BankCardNumber"),maxlength:20,placeholder:this.$t("bankCard.PleaseEnterTheBankCardNumber"),rules:[{required:!0,message:this.$t("bankCard.PleaseEnterTheBankCardNumber")},{message:this.$t("bankCard.NumberOnly"),validator:e=>s["a"].number(e).flag}]}]}},watch:{accountType(e){0===e.id?(this.init(),this.formFields=[{name:"BankCardNumber",value:"",label:this.$t("bankCard.BankCardNumber"),maxlength:20,placeholder:this.$t("bankCard.PleaseEnterTheBankCardNumber"),rules:[{required:!0,message:this.$t("bankCard.PleaseEnterTheBankCardNumber")},{message:this.$t("bankCard.NumberOnly"),validator:e=>s["a"].number(e).flag}]}]):(this.formFields=[{name:"accountNumber",value:"",label:this.$t("bankCard.withdrawAddress"),placeholder:this.$t("bankCard.enterWithDrawAddress"),rules:[{required:!0,message:this.$t("bankCard.enterWithDrawAddress")}]}],this.bankList=[{id:0,name:()=>"TRC20"},{id:1,name:()=>"ERC20"}])}},methods:{init(){this.$api.my.getPerInfo({body:{}},e=>{this.userName=e.data.realname}),this.$api.cardList.getCardList({body:{}},e=>{this.bankList=e.data.list.map(e=>l(l({},e),{},{name:()=>e.name})),this.activeBank=this.bankList[0]})},getParam(){return 0===this.accountType.id?{accountType:1,accountNumber:this.formFields[0].value,bankId:this.activeBank.id,accountAddress:"none",mainCard:!0===this.isMainCard?1:0}:{accountType:4,accountNumber:this.formFields[0].value,accountAddress:0===this.activeBank.id?"TRC20":"ERC20",mainCard:!0===this.isMainCard?1:0}},onSelect(e){this.activeBank=e},onChainTypeSelect(e){this.activeChainType=e},onAccountTypeSelect(e){0===e.id?(this.init(),this.formFields=[{name:"BankCardNumber",value:"",label:this.$t("bankCard.BankCardNumber"),maxlength:20,placeholder:this.$t("bankCard.PleaseEnterTheBankCardNumber"),rules:[{required:!0,message:this.$t("bankCard.PleaseEnterTheBankCardNumber")},{message:this.$t("bankCard.NumberOnly"),validator:e=>s["a"].number(e).flag}]}]):(this.formFields=[{name:"accountNumber",value:"",label:this.$t("bankCard.withdrawAddress"),placeholder:this.$t("bankCard.enterWithDrawAddress"),rules:[{required:!0,message:this.$t("bankCard.enterWithDrawAddress")}]}],this.bankList=[{id:0,name:()=>"TRC20"},{id:1,name:()=>"ERC20"}]),this.accountType=e,this.activeBank=this.bankList[0]},onSubmit(){const e=this.getParam();this.$api.cardList.addWithdrawAccount({body:e},()=>{const e=this.$route.query.redirect;let t="";e?(t=e,this.$cf.showSuccessMessageDialog(this.$t("bankCard.TheBindingIsSuccessfulReturn"))):(t="/cardList",this.$cf.showSuccessMessageDialog(this.$t("bankCard.TheBindingIsSuccessfulReturnToTheList"))),setTimeout(()=>{this.$router.push({path:t})},1e3)})},goBack(){this.$router.push("/cardList")},omitInfo(e){if(void 0!==e){if(e.length>=32){const t=e.substring(0,31);return t+" ..."}return e}return"--"}},created(){this.init()}},o=u,d=(a("3697"),a("2877")),h=Object(d["a"])(o,n,r,!1,null,null,null);t["default"]=h.exports},a9b3:function(e,t,a){},f2dc:function(e,t,a){"use strict";var n=a("72f2");t["a"]={strnumDa6(e){const t=/^[a-zA-Z0-9]{6,}$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入6位以上数字或字母"}},passwordValid(e){const t=/^[a-zA-Z0-9_]{6,}$/,a=new RegExp(t);return{flag:a.test(e),text:"格式須由 6~16 位半形英数字及下底線组成"}},BDYPasswordValid(e){const t=/^[a-zA-Z0-9]{6,16}$/,a=new RegExp(t);return{flag:a.test(e),text:"格式須由 6~16 位半形英数字"}},BFDrawNumber(e){const t=/^[0-9]{4,8}$/,a=new RegExp(t);return{flag:a.test(e),text:"格式错误，请设定 4~8 位数字密码"}},BDYDrawNumber(e){const t=/^[0-9]{6,}$/,a=new RegExp(t);return{flag:a.test(e),text:"格式错误，请设定 6 位数字密码"}},BFAccount(e){const t=/^BF[a-zA-Z0-9]{4,}$/,a=new RegExp(t);return{flag:a.test(e),text:"帐号格式必须为BF开头且符合 6~14 位"}},EDFAccount(e){const t=/^EDF[a-zA-Z0-9]{4,}$/,a=new RegExp(t);return{flag:a.test(e),text:"帐号格式必须为EDF开头且符合 6~14 位"}},BDYAcount(e){const t=/^[a-zA-Z0-9]{4,12}$/,a=new RegExp(t);return{flag:a.test(e),text:"帐号长度必须为 4~12 位半形英数字"}},THAcount(e){const t=/^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z0-9]{6,10}$/,a=new RegExp(t);return{flag:a.test(e),text:"账号格式为6-10位英文+数字的組合"}},THAcountLogin(e){const t=/^[a-zA-Z0-9]{6,10}$/,a=new RegExp(t);return{flag:a.test(e),text:"账号格式为6-10位英文+数字的組合"}},LOAccountLogin(e){const t=/^LE[a-zA-Z0-9]{6,10}$/,a=new RegExp(t);return{flag:a.test(e),text:"帐号格式必须为LE开头且符合 8~12 位"}},THPasswordValid(e){const t=/^[a-zA-Z0-9_]{6,16}$/,a=new RegExp(t);return{flag:a.test(e),text:"密码格式为6-16位英数字及 '_'"}},THRealName(e){const t=/^[a-zA-Z\u4E00-\u9FA5\u0E01-\u0E5B ]{2,128}$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入汉字"}},phoneNum(e,t,a,n){let r;if(e){r=a?this[a.ruleName](e,t,n):this.phoneNumRuleCN(e,t,n);const s=a?this[a.blackRuleName](e,t,n):this.phoneBlackListCN(e,t,n);return s.flag||(r=s),r}},phoneNumRuleTH(e){const t=/^\d{9,10}$/,a=new RegExp(t);return{flag:a.test(e),text:"手机号码格式错误"}},phoneNumRuleCN(e){const t=/^1\d{10}$/,a=new RegExp(t);return{flag:a.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码格式错误"}},phoneBlackListCN(e,t,a){t=t||n["a"].state.notAllowPhoneNumber,a=a||n["a"].state.nationCode;let r=a;a||(r=""===a?"86":"66");const s=[];let i=!0;t.split("|").forEach(e=>{const t=e.split("-");t.length<2&&(i=!1),t[0]===r&&s.push(t[1])});const l=i?s.join("|"):t,c=`^(${l}){1,}[0-9]{8,9}$`,u=new RegExp(c);return{flag:!u.test(e)&&11===e.length&&e.startsWith("1"),text:"手机号码无法使用，请联系客服"}},phoneBlackListTH(e,t,a){t=t||n["a"].state.notAllowPhoneNumber,a=a||n["a"].state.nationCode;let r=a;a||(r=""===a?"86":"66");const s=[];let i=!0;t.split("|").forEach(e=>{const t=e.split("-");t.length<2&&(i=!1),t[0]===r&&s.push(t[1])});const l=i?s.join("|"):t,c=`^(${l}){1,}[0-9]{6,8}$`,u=new RegExp(c);return{flag:!u.test(e),text:"手机号码无法使用，请联系客服"}},email(e){const t=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入正确的邮箱号码格式"}},yuming(e){const t=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\/.?/,a=new RegExp(t);return{flag:a.test(e),text:"请输入正确的域名格式"}},shenfenz(e){const t=/(^d{15}$)|(^d{17}([0-9]|X)$)/,a=new RegExp(t);return{flag:a.test(e),text:"请输入正确的身份证号码格式"}},number(e){const t=/^[0-9]*$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入数字"}},hanzi(e){const t=/^[\u4e00-\u9fa5·．]{0,}$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入汉字"}},BDYRealName(e){const t=/^[\u4e00-\u9fa5·．]{2,}$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入汉字"}},strnum(e){const t=/^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$/,a=new RegExp(t);return{flag:a.test(e),text:"请输入数字或字母"}},noFullWidth(e){const t=/[\uff00-\uffff]/g,a=new RegExp(t);return{flag:!a.test(e),text:"格式错误，不可包含全形"}},validYoung(e){const t=new Date,a=new Date(e);let n=t.getFullYear()-a.getFullYear();const r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&(n-=1),{flag:n>=18,text:"未满18岁，无法注册"}},specialCharacters(e){const t=/^[A-Za-z0-9\u4e00-\u9fa5]{1,20}$/,a=new RegExp(t);return{flag:a.test(e),text:"格式错误，限中、英、数字"}}}}}]);