(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["activityTabList"],{"058a":function(t,i,e){},"37ca":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-tab-list-container"},[e("TheHeader",{attrs:{"left-arrow":"",title:t.$t("activityTabList.Promotions"),"left-click":t.goBack,isFixedTop:!0}}),e("van-tabs",{attrs:{swipeable:"",animated:""},on:{click:t.onTab},model:{value:t.activeIndex,callback:function(i){t.activeIndex=i},expression:"activeIndex"}},t._l(t.activityTypes,(function(i){return e("van-tab",{key:i.id,attrs:{title:i.name}},[e("BaseScroller",{attrs:{"scroller-height":t.scrollerHeight}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(i){t.refreshing=i},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,offset:"100","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.activityList,(function(i){return e("ActivityItem",{key:i.id,attrs:{item:i,round:"",width:"325px"},nativeOn:{click:function(e){return t.openActivity(i)}}})})),1)],1)],1)],1)})),1)],1)},s=[],n=e("a79b"),c={name:"ActivityTabList",data(){return{scrollerHeight:"calc(100vh - 90px)",refreshing:!1,loading:!1,finished:!1,activeIndex:0,activityList:[],activityTypes:[],cateId:"",pageNum:1,debounceDo:Object(n["b"])(this.getActivityList,200)}},created(){this.getActivityType(),this.getActivityList(),window.gtag("event","优惠活动")},methods:{goBack(){this.$router.go(-1)},onRefresh(){this.finished=!1,this.loading=!0,this.getActivityList()},onLoad(){this.pageNum++,this.debounceDo()},onTab(){this.cateId=this.activityTypes[this.activeIndex].id||"",this.refreshing=!0,this.onRefresh()},openActivity(t){1===t.type?this.$router.push({path:"/activity",query:{id:t.id,cateId:t.cateId}}):window.open(t.externalLink,"_self")},getActivityType(){this.$api.youhuiActivity.getActivityType({body:{}},t=>{var i;null===(i=t.data)||void 0===i||i.unshift({name:this.$t("activityTabList.AllOffers"),id:""}),this.activityTypes=t.data})},getActivityList(){this.refreshing&&(this.activityList=[],this.pageNum=1,this.refreshing=!1),this.finished||this.$api.youhuiActivity.getActivityList({body:{state:1,cateId:this.cateId},pageBean:{page:this.pageNum,pageSize:15}},t=>{var i,e;this.activityList=this.activityList.concat(null===(i=t.data)||void 0===i?void 0:i.data)||[],this.finished=!(null!==(e=t.data)&&void 0!==e&&e.hasNextPage),this.loading=!1})}},components:{ActivityItem:()=>e.e("chunk-77db6878").then(e.bind(null,"23e7f"))}},o=c,r=(e("70ee"),e("2877")),h=Object(r["a"])(o,a,s,!1,null,null,null);i["default"]=h.exports},"70ee":function(t,i,e){"use strict";var a=e("058a"),s=e.n(a);s.a}}]);