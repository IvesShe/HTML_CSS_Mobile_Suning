(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["lotteryRecord"],{"6f6c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lottery-record-container"},[i("TheHeader",{attrs:{title:t.$t("flipsCard.LotteryRecord"),"left-arrow":"","left-click":t.goBack}}),i("van-tabs",{staticClass:"tapchang-title",attrs:{type:"line","line-height":3,"swipe-threshold":"6",sticky:"",animated:""},on:{click:t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(e){return i("van-tab",{key:e.type,attrs:{title:e.name}},[i("LotteryRecordPage",{attrs:{pageItem:t.dataList[t.active],timeObj:t.timeObj,pagination:t.pagination,active:t.active},on:{getRecordLog:t.getRecordLog,loadMore:t.loadMore,openApplyPrize:t.openApplyPrize}})],1)})),1),t.showApplyPrize?i("ApplyPrize",{attrs:{prizeInfo:t.prizeInfo},on:{close:t.closeApplyPrize,submit:t.submitApplyPrize}}):t._e()],1)},n=[],s=i("9ccf"),o={data:function(){return{tabs:[{type:1,name:this.$t("wheelBox.FreeDraw"),spinType:"FREE"},{type:2,name:this.$t("wheelBox.DiamondDraw"),spinType:"DIAMOND"},{type:3,name:this.$t("flipsCard.FlipsCardTitle"),spinType:"FLIPCARD"}],title:this.$t("wheelBox.FreeDraw"),type:1,active:0,dataList:[[],[],[]],timeObj:{start:this.$dateFun.getDateByDay(-7),end:this.$dateFun.getDateByDay()},pageNum:1,pageSize:5,api:"queryLotteryRecordLog",spinType:"FREE",pagination:{show:!1,loading:!1},showApplyPrize:!1,prizeInfo:{}}},methods:{closeApplyPrize:function(){this.prizeInfo={},this.showApplyPrize=!1},openApplyPrize:function(t){this.prizeInfo=t,this.showApplyPrize=!0},getRecordLog:function(t){t&&(this.timeObj=t),this.init()},submitApplyPrize:function(t){var e=this;this.$api.lotteryList.applyLuckySpinReward({body:t},(function(t){e.$cf.showSuccessMessageDialog(t.message),e.showApplyPrize=!1,e.getRecordLog()}))},goBack:function(){Object(s["goBack"])(this.$route)},init:function(t,e){var i=this;this.pagination.loading=!0,this.$api.lotteryList.queryLotteryRecordLog({body:{spinType:this.spinType,startTime:this.$dateFun.formatDate(this.timeObj.start,"yyyy-MM-dd"),endTime:this.$dateFun.formatDate(this.timeObj.end,"yyyy-MM-dd")},pageBean:{page:t||1,pageSize:this.pageSize}},(function(t){var a,n,s,o;null!==e&&void 0!==e&&e.isStack?i.dataList[i.active]=i.dataList[i.active].concat(null===(s=t.data)||void 0===s?void 0:s.data):i.dataList[i.active]=null===(o=t.data)||void 0===o?void 0:o.data;i.pagination.show=(null===(a=t.data)||void 0===a?void 0:a.hasNextPage)&&0!==(null===(n=t.data)||void 0===n?void 0:n.data.length),i.pagination.loading=!1,i.$forceUpdate()}),(function(){i.pagination.loading=!1}))},loadMore:function(t){var e=t.currentPage;this.init(e,{isStack:!0})},changeTab:function(){this.title=this.tabs[this.active].name,this.timeObj={start:this.timeObj.start,end:this.timeObj.end},this.$router.push({name:"lotteryRecord",query:{tabName:this.tabs[this.active].spinType}})},queryRecord:function(){this.init()},onChxeDate:function(t){this.type=t,this.$refs["".concat(this.type,"chxeDate")].showDate=!0},confirmDate:function(t){this.timeObj[this.type]=t}},filters:{getText:function(t,e){return"暂无".concat(e[t].name,"记录")}},components:{LotteryRecordPage:function(){return i.e("chunk-37b882fc").then(i.bind(null,"64bd"))},ApplyPrize:function(){return i.e("chunk-3717fee4").then(i.bind(null,"a9a0"))}},watch:{$route:function(){switch(this.$route.query.tabName){case"DIAMOND":this.active=1;break;case"FLIPCARD":this.active=2;break;default:this.active=0;break}this.spinType=this.$route.query.tabName,this.title=this.tabs[this.active].name,this.init()}},created:function(){if(this.$route.query.tabName){switch(this.$route.query.tabName){case"DIAMOND":this.active=1;break;case"FLIPCARD":this.active=2;break;default:this.active=0;break}this.spinType=this.tabs[this.active].spinType,this.title=this.tabs[this.active].name,this.init()}else this.$router.push({name:"lotteryRecord",query:{tabName:this.tabs[this.active].spinType,redirect:this.$route.query.redirect}})}},r=o,c=i("2877"),p=Object(c["a"])(r,a,n,!1,null,"5135f920",null);e["default"]=p.exports}}]);