(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee898546"],{"2f6d":function(e,t,a){},"3b07":function(e,t,a){e.exports=a.p+"img/icon-changePic.93829a0f.svg"},"9c80":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-uploader",{staticClass:"avatar-upload-container",attrs:{"after-read":e.onRead,"before-read":e.onBefore,"max-size":"3145728",disabled:e.disabled},on:{oversize:e.oversize}},[e.userAvatar?r("img",{staticClass:"avatar__img",class:e.imgClass,attrs:{src:e.userAvatar,alt:""}}):e._e(),e.disabled?e._e():r("img",{staticClass:"avatar__picture",attrs:{src:a("3b07"),alt:""}})])},s=[];function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={name:"AvatarUpload",props:{avatar:String,imgClass:String,disabled:{type:Boolean,default:!1}},computed:{userAvatar:{get(){return this.avatar},set(e){this.$emit("update:avatar",e),this.$store.commit("setUserInfo",n(n({},this.$store.state.userInfo),{},{avatar:e}))}}},created(){this.userAvatar||this.getDefaultHeadimg().then(e=>{this.userAvatar=e}).catch(()=>{this.userAvatar=""})},methods:{onRead(e){const t=new FormData;t.append("file",e.file),this.$api.my.uploadImg(t).then(e=>{this.userAvatar=e.data.data,this.$api.my.Upper({body:{avatar:e.data.data}},()=>{this.$cf.showSuccessMessageDialog(this.$t("perSettings.UploadPicturesSuccessfully"))})},()=>{this.$cf.showErrorMessageDialog(this.$t("perSettings.FailedToUploadImages"))})},oversize(){this.$cf.showErrorMessageDialog(this.$t("perSettings.Tip1"))},onBefore(e,t){return-1===e.type.indexOf("jpg")&&-1===e.type.indexOf("jpeg")&&-1===e.type.indexOf("png")?(this.$cf.showErrorMessageDialog(this.$t("perSettings.Tip2")),!1):t},getDefaultHeadimg(){return new Promise((e,t)=>{this.$api.my.getDefaultHeadimg({},a=>{a.data.defaultHeadimg?e(a.data.defaultHeadimg):t()})})}}},u=c,p=(a("d9c5"),a("2877")),l=Object(p["a"])(u,r,s,!1,null,"8f8c6994",null);t["default"]=l.exports},d9c5:function(e,t,a){"use strict";var r=a("2f6d"),s=a.n(r);s.a}}]);