(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["flipsCard"],{bbcb:function(t,i,e){"use strict";e.r(i);var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"pdt4 pdb4 flipscard-container"},[e("img",{staticClass:"flipCard-banner",attrs:{src:t.cardData.h5_img,alt:""}}),e("div",{staticClass:"flipsCard"},[e("div",{staticClass:"flipsCard-content"},[e("div",{staticClass:"icon-wrap"},[e("div",{staticClass:"flipsCard-icon flipsCard-icon-description",on:{click:function(i){t.showDescription=!0}}},[e("span",[t._v("?")])])]),e("div",{staticClass:"wheel-count"},[e("div",{staticClass:"today"},[e("div",[t._v(t._s(t.$t("flipsCard.TodayPlayedByTimesNumber")))]),e("span",[t._v(t._s(t.cardData.todayPlayedByTimesNumber))])]),e("div",{staticClass:"remain"},[e("div",[t._v(t._s(t.$t("flipsCard.RestNumber")))]),e("span",[t._v(t._s(t.cardData.restNumber))])])]),e("CardGame",{ref:"cardGame",staticClass:"cardGame",attrs:{cardData:t.cardData},on:{onGetPrize:t.getPrize,reload:t.reload}}),e("van-button",{staticClass:"btn-start",attrs:{disabled:t.isShuffle},on:{click:t.goShuffle}},[t._v(t._s(t.$t("flipsCard.StartShuffle")))])],1),e("span",{staticClass:"btn-log",on:{click:function(i){return t.goLotteryRecord()}}},[t._v(t._s(t.$t("flipsCard.LotteryRecord")))])]),e("LotteryDescription",{attrs:{showDescriptionProp:t.showDescription,descHtml:t.cardData.content},on:{close:t.closeDescription}}),e("van-dialog",{staticClass:"prize-dialog",attrs:{showConfirmButton:!1,title:t.prizeDetail.prizeType!==t.PRIZETYPE_ENUM.FAIL?t.prizeDetail.prizeName:t.$t("flipsCard.NotWinning")},on:{close:function(i){return t.closePrize()}},model:{value:t.isShowPrize,callback:function(i){t.isShowPrize=i},expression:"isShowPrize"}},[e("van-nav-bar",{staticClass:"head-box"},[e("van-icon",{attrs:{slot:"right",name:"cross"},on:{click:function(i){t.isShowPrize=!1}},slot:"right"})],1),e("div",{staticClass:"role-wrap"},[e("img",{attrs:{src:t.prizeDetail.imageUrl}}),e("div",{staticClass:"role-wrap__text"},[t._v(t._s(t.prizeDetail.description))]),t.prizeDetail.prizeType===t.PRIZETYPE_ENUM.GOOD?e("div",{staticClass:"again",on:{click:function(i){return t.openApplyPrize()}}},[t._v(t._s(t.$t("flipsCard.ApplyForRewards")))]):t._e()])],1),t.showApplyPrize?e("ApplyPrize",{attrs:{prizeInfo:t.prizeInfo},on:{close:t.closeApplyPrize,submit:t.submitApplyPrize}}):t._e()],1)},s=[],a=e("a79b");function n(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?n(Object(e),!0).forEach((function(i){c(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function c(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var l={name:"FlipsCard",data:function(){return{showDescription:!1,showApplyPrize:!1,prizeInfo:{id:null,prizeType:0},spinType:"FLIPCARD",timer:0,isShowPrize:!1,prizeDetail:{},flipsCardId:"",cardData:{todayPlayedByTimesNumber:0,dailyLimit:0,restNumber:0,jifunNumber:0,deductJifun:0,itemList:[]},isShuffle:!1,isAgain:!1,PRIZETYPE_ENUM:{FAIL:"0",MONEY:"1",INTEGRAL:"2",GOOD:"3",DEPOSIT:"4"}}},methods:{goLotteryRecord:function(){var t=this.$router.resolve({name:"lotteryRecord",query:{tabName:this.spinType,redirect:this.$router.currentRoute.fullPath}});window.open(t.href,"_blank")},getPrize:function(t){this.isShowPrize=!0,this.prizeDetail=t,this.prizeInfo=o({},t),this.prizeInfo.prizeType=Number(this.prizeInfo.prizeType),this.prizeInfo.id=t.spinLogId},goShuffle:function(){this.isShuffle||(this.isShuffle=!0,this.shuffle())},shuffle:function(){var t=this,i=this.$refs.cardGame;i.allMove(),setTimeout((function(){t.cardData.itemList.sort((function(){return.5-Math.random()}))}),1e3)},closePrize:function(){this.isShowPrize=!1;var t=this.$refs.cardGame;t.showClass=!1,this.isShuffle=!1,this.getCard()},getCard:function(){var t=this;this.$api.actiList.initActivityLuckySpin({body:{type:this.spinType,address:this.flipsCardId}},(function(i){if(i.data.itemList.length<9)for(var e=i.data.itemList.find((function(i){return i.prizeType===t.PRIZETYPE_ENUM.FAIL})),r=9-i.data.itemList.length,s=0;s<r;s+=1)i.data.itemList.push(e);t.cardData=i.data}))},closeApplyPrize:function(){this.showApplyPrize=!1},openApplyPrize:function(){this.showApplyPrize=!0},submitApplyPrize:function(t){var i=this;this.$api.lotteryList.applyLuckySpinReward({body:t},(function(t){i.$cf.showSuccessMessageDialog(t.message),i.showApplyPrize=!1,i.isShowPrize=!1}))},reload:function(){var t=this.$refs.cardGame;t.showClass=!1,this.isShuffle=!1,this.getCard()},closeDescription:function(){this.showDescription=!1},changeLang:function(t){Object(a["a"])(t,this),this.isDrawerOpen=!1}},created:function(){if(this.flipsCardId=this.$route.query.id,!this.flipsCardId){var t=localStorage.getItem("flipsData");t&&(this.flipsCardId=t)}this.getCard()},mounted:function(){this.changeLang(localStorage.getItem("locale"))},beforeDestroy:function(){clearInterval(this.timer)},components:{LotteryDescription:function(){return e.e("chunk-07084f83").then(e.bind(null,"8232"))},ApplyPrize:function(){return e.e("chunk-3717fee4").then(e.bind(null,"a9a0"))},CardGame:function(){return e.e("chunk-5af9db7e").then(e.bind(null,"9844"))}}},p=l,f=(e("c20c"),e("2877")),d=Object(f["a"])(p,r,s,!1,null,null,null);i["default"]=d.exports},be7ff:function(t,i,e){},c20c:function(t,i,e){"use strict";var r=e("be7ff"),s=e.n(r);s.a}}]);